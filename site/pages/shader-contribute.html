<!DOCTYPE html>
<html lang="zh-CN" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shader 投稿 - 泰拉瑞亚Mod制作教程</title>
    <meta name="description" content="Shader Gallery 投稿页面，支持 GitHub 登录并自动创建投稿 PR。">
    <meta name="keywords" content="Shader,投稿,Gallery,HLSL,tModLoader,泰拉瑞亚,Mod,PR">
    <link rel="stylesheet" href="/site/assets/css/style.css">
    <link rel="stylesheet" href="/site/assets/css/workbench-phase.css">
    <link rel="stylesheet" href="/site/assets/css/shader-contribute.css">
    <link rel="icon" type="image/png" href="/site/assets/imgs/Green_tModLoader.png">
    <script src="/site/assets/js/theme-init.js"></script>
</head>
<body class="workbench-page viewer-page shader-contribute-page">
    <header class="site-header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <a href="/site/index.html">
                        <img src="/site/assets/imgs/Green_tModLoader.png" alt="泰拉瑞亚Mod制作教程" class="logo-image">
                        <h1 class="site-title">泰拉瑞亚Mod制作教程</h1>
                    </a>
                </div>
                <form class="header-search" role="search" action="/site/search-results.html" method="get">
                    <label class="visually-hidden" for="header-search-q">搜索教程</label>
                    <input class="header-search-input" id="header-search-q" type="search" name="q" placeholder="搜索教程..." aria-label="搜索教程">
                    <button class="header-search-button" type="submit" aria-label="执行搜索">
                        <i class="icon-search" aria-hidden="true"></i>
                    </button>
                </form>
                <nav class="main-nav" id="main-nav">
                    <ul class="nav-list">
                        <li class="nav-item"><a href="/site/index.html" class="nav-link">首页</a></li>
                        <li class="nav-item"><a href="/site/pages/folder.html" class="nav-link">文档</a></li>
                        <li class="nav-item"><a href="/site/pages/article-studio.html" class="nav-link">在线写作IDE</a></li>
                        <li class="nav-item"><a href="/site/pages/shader-playground.html" class="nav-link">Shader</a></li>
                        <li class="nav-item"><a href="/site/pages/shader-gallery.html" class="nav-link">Gallery</a></li>
                        <li class="nav-item"><a href="/site/qa.html" class="nav-link">问答</a></li>
                        <li class="nav-item"><a href="https://github.com/DPapyru/DPapyru.github.io" class="nav-link" target="_blank" rel="noopener noreferrer">GitHub</a></li>
                        <li class="nav-item nav-accent">
                            <label class="visually-hidden" for="accent-select">配色</label>
                            <select class="nav-accent-select" id="accent-select" aria-label="配色">
                                <option value="green">绿色</option>
                                <option value="blue">蓝色</option>
                                <option value="purple">紫色</option>
                                <option value="orange">橙色</option>
                                <option value="red">红色</option>
                                <option value="cyan">青色</option>
                                <option value="black">黑色</option>
                                <option value="white">白色</option>
                                <option value="vs">VS</option>
                                <option value="git">Git</option>
                                <option value="terraria-crimson">猩红</option>
                                <option value="terraria-corruption">腐化</option>
                                <option value="terraria-hallow">神圣</option>
                                <option value="terraria-tundra">冰原</option>
                                <option value="terraria-desert">沙漠</option>
                            </select>
                        </li>
                    </ul>
                </nav>
                <button class="mobile-menu-toggle" type="button" aria-label="切换菜单" aria-controls="main-nav" aria-expanded="false">
                    <span class="bar"></span>
                    <span class="bar"></span>
                    <span class="bar"></span>
                </button>
            </div>
        </div>
    </header>

    <main class="workbench-main main-content">
        <div class="container">
            <div class="content-wrapper">
                <div class="tutorial-header">
                    <div class="tutorial-topbar">
                        <div class="breadcrumb">
                            <a href="../index.html">首页</a> &gt;
                            <a href="shader-gallery.html">Shader Gallery</a> &gt;
                            <span class="current">投稿</span>
                        </div>
                    </div>
                    <h1 class="tutorial-title">Shader 投稿</h1>
                    <div class="tutorial-meta">
                        <span>用途: GitHub 登录后自动创建 Shader Gallery PR（README + entry.json + shader.json）</span>
                    </div>
                </div>

                <section class="shader-contribute-shell" aria-label="Shader 投稿入口">
                    <div class="shader-contribute-grid">
                        <div class="shader-contribute-left">
                            <section class="shader-contribute-card">
                                <h2 class="shader-contribute-title">投稿步骤</h2>
                                <ol class="shader-contribute-list">
                                    <li>在 Shader Playground 调好效果后，点击“投稿页面”或本页“填充草稿”。</li>
                                    <li>确认模板中的 `entry.json`、`shader.json` 与 `README.md` 内容。</li>
                                    <li>点击“校验模板”，确认 slug、路径与 pass 数量正确。</li>
                                    <li>点击“GitHub 登录”，完成授权。</li>
                                    <li>点击“提交 PR”，系统会自动生成投稿目录与 JSON 文件。</li>
                                    <li>本地补充封面图后，运行 `npm run gallery:normalize` 和 `npm run gallery:check`。</li>
                                </ol>
                                <p class="shader-contribute-note">说明：封面支持先传 PNG/JPG/GIF，最终会规范化为 WebP，便于控制仓库体积。</p>
                                <div class="shader-contribute-actions">
                                    <a class="shader-contribute-link" href="shader-playground.html">返回 Playground</a>
                                    <a class="shader-contribute-link" href="shader-gallery.html">返回 Gallery</a>
                                    <a class="shader-contribute-link" href="https://github.com/DPapyru/DPapyru.github.io/tree/main/site/content/shader-gallery" target="_blank" rel="noopener noreferrer">查看投稿目录</a>
                                    <a class="shader-contribute-link" href="https://github.com/DPapyru/DPapyru.github.io/compare" target="_blank" rel="noopener noreferrer">发起 PR 投稿</a>
                                </div>
                            </section>

                            <section class="shader-contribute-card shader-contribute-publish-card">
                                <h2 class="shader-contribute-title">自动投稿</h2>

                                <div class="shader-contribute-panel-section">
                                    <label for="shader-contribute-pr-worker-url">Worker API 地址</label>
                                    <input id="shader-contribute-pr-worker-url" class="shader-contribute-input" type="text" placeholder="https://xxx.workers.dev/api/create-pr">
                                    <span class="shader-contribute-help">若出现 Failed to fetch，系统会自动尝试备用 Worker；仍失败请改为可访问的自定义域名。</span>
                                </div>

                                <div class="shader-contribute-panel-section">
                                    <label>GitHub 账号</label>
                                    <div class="shader-contribute-auth-actions">
                                        <button id="shader-contribute-auth-login" class="btn btn-small btn-outline" type="button">GitHub 登录</button>
                                        <button id="shader-contribute-auth-logout" class="btn btn-small btn-outline" type="button">退出</button>
                                    </div>
                                    <span id="shader-contribute-auth-status" class="shader-contribute-auth-status">未登录</span>
                                </div>

                                <div class="shader-contribute-panel-section">
                                    <label for="shader-contribute-pr-title">PR 标题（可选）</label>
                                    <input id="shader-contribute-pr-title" class="shader-contribute-input" type="text" placeholder="例如：shader: 投稿 My Shader">
                                </div>

                                <div class="shader-contribute-panel-section shader-contribute-targets">
                                    <div class="shader-contribute-target-head">本次提交将写入：</div>
                                    <div class="shader-contribute-target-item"><span>entry.json</span><code id="shader-contribute-target-entry">site/content/shader-gallery/my-shader/entry.json</code></div>
                                    <div class="shader-contribute-target-item"><span>shader.json</span><code id="shader-contribute-target-shader">site/content/shader-gallery/my-shader/shader.json</code></div>
                                    <div class="shader-contribute-target-item"><span>README.md</span><code id="shader-contribute-target-readme">site/content/shader-gallery/my-shader/README.md</code></div>
                                    <div class="shader-contribute-template-summary" id="shader-contribute-template-summary">等待解析模板...</div>
                                </div>

                                <div class="shader-contribute-panel-section">
                                    <button id="shader-contribute-validate" class="btn btn-small btn-outline" type="button">校验模板</button>
                                    <button id="shader-contribute-submit-pr" class="btn btn-small shader-contribute-btn-primary" type="button">提交 PR</button>
                                    <a id="shader-contribute-last-pr-link" class="shader-contribute-link shader-contribute-link--inline" href="#" target="_blank" rel="noopener noreferrer" hidden>查看最近 PR</a>
                                </div>

                                <details class="shader-contribute-advanced-panel">
                                    <summary>高级发布选项</summary>
                                    <div class="shader-contribute-panel-section">
                                        <label for="shader-contribute-pr-shared-key">兼容密钥（可选）</label>
                                        <input id="shader-contribute-pr-shared-key" class="shader-contribute-input" type="password" placeholder="仅兼容旧版 Worker 的 STUDIO_SHARED_KEY" autocomplete="current-password">
                                        <span class="shader-contribute-help">优先使用 GitHub 登录；仅在 Worker 仍启用密钥模式时填写。</span>
                                    </div>
                                </details>
                            </section>
                        </div>

                        <section class="shader-contribute-card shader-contribute-template-card">
                            <div class="shader-contribute-template-header">
                                <h2 class="shader-contribute-title">投稿模板</h2>
                                <div class="shader-contribute-template-actions">
                                    <button class="btn btn-small btn-outline" id="shader-contribute-fill-draft" type="button">填充草稿</button>
                                    <button class="btn btn-small btn-outline" id="shader-contribute-copy" type="button">复制模板</button>
                                    <button class="btn btn-small btn-outline" id="shader-contribute-download" type="button">下载 .md</button>
                                    <button class="btn btn-small btn-outline" id="shader-contribute-reset" type="button">恢复默认</button>
                                </div>
                            </div>
                            <textarea class="shader-contribute-template" id="shader-contribute-template" spellcheck="false"></textarea>
                        </section>
                    </div>

                    <div class="shader-contribute-status" id="shader-contribute-status">准备就绪。</div>
                </section>
            </div>
        </div>
    </main>
    <section class="ui-workbench-status" aria-label="页面状态">
        <div class="container">
            <strong>WORKBENCH</strong>
            <span>Swiss Style x Developer Functionalism · 仅样式层改造（No JS Changes）</span>
        </div>
    </section>

    <div class="workbench-statusbar" role="status" aria-label="页面状态栏"><span class="workbench-statusbar-item">SWISS WORKBENCH</span><span class="workbench-statusbar-sep" aria-hidden="true">|</span><span class="workbench-statusbar-item">LAYOUT: IDE</span><span class="workbench-statusbar-spacer"></span><span class="workbench-statusbar-item">THEME: ACCENT</span></div>


    <footer class="site-footer">
        <div class="container">
            <div class="footer-content">
                <p>&copy; 2024 泰拉瑞亚Mod制作教程. 基于 tModLoader 开发.</p>
            </div>
        </div>
    </footer>

    <script src="/shared/assets/js/site-core.js"></script>
    <script src="/site/assets/js/navigation.js"></script>
    <script>
        if (window.SITE) window.SITE.bootstrapPage('shader-contribute');
    </script>
    <script src="/site/assets/js/accent-theme.js"></script>
    <script src="/site/assets/js/shader-contribute.js"></script>
</body>
</html>
