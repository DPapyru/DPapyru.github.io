<!DOCTYPE html>
<html lang="zh-CN" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>在线写作IDE（Markdown）</title>
    <link rel="stylesheet" href="/site/assets/css/style.css">
    <link rel="stylesheet" href="/site/assets/css/prism.min.css">
    <link rel="stylesheet" href="/site/assets/css/vs2022-theme.css">
    <link rel="stylesheet" href="/site/assets/css/article-studio.css">
    <link rel="icon" type="image/png" href="/site/assets/imgs/Green_tModLoader.png">
    <script src="/site/assets/js/theme-init.js"></script>
</head>
<body class="viewer-page">
    <header class="site-header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <a href="../index.html">
                        <img src="/site/assets/imgs/Green_tModLoader.png" alt="泰拉瑞亚Mod制作教程" class="logo-image">
                        <h1 class="site-title">在线写作IDE</h1>
                    </a>
                </div>
                <nav class="main-nav" id="main-nav">
                    <ul class="nav-list">
                        <li class="nav-item"><a href="../index.html" class="nav-link">首页</a></li>
                        <li class="nav-item"><a href="folder.html" class="nav-link">文档</a></li>
                        <li class="nav-item"><a href="article-studio.html" class="nav-link active" aria-current="page">在线写作IDE</a></li>
                        <li class="nav-item"><a href="shader-playground.html" class="nav-link">Shader</a></li>
                        <li class="nav-item"><a href="shader-gallery.html" class="nav-link">Gallery</a></li>
                        <li class="nav-item"><a href="../qa.html" class="nav-link">问答</a></li>
                        <li class="nav-item"><a href="https://github.com/DPapyru/DPapyru.github.io" class="nav-link" target="_blank" rel="noopener noreferrer">GitHub</a></li>
                        <li class="nav-item nav-accent">
                            <label class="visually-hidden" for="accent-select">配色</label>
                            <select class="nav-accent-select" id="accent-select" aria-label="配色">
                                <option value="green">绿色</option>
                                <option value="blue">蓝色</option>
                                <option value="purple">紫色</option>
                                <option value="orange">橙色</option>
                                <option value="red">红色</option>
                                <option value="cyan">青色</option>
                                <option value="black">黑色</option>
                                <option value="white">白色</option>
                            </select>
                        </li>
                    </ul>
                </nav>
                <button class="mobile-menu-toggle" type="button" aria-label="切换菜单" aria-controls="main-nav" aria-expanded="false">
                    <span class="bar"></span>
                    <span class="bar"></span>
                    <span class="bar"></span>
                </button>
            </div>
        </div>
    </header>

    <main class="main-content article-studio-main">
        <div class="container">
            <div class="content-wrapper article-studio-wrapper">
                <div class="tutorial-header">
                    <h1 class="tutorial-title">Markdown 写作工作区</h1>
                    <div class="tutorial-meta">
                        <span class="author">定位: <span>仅 Markdown 编辑 + viewer.html 同级预览</span></span>
                    </div>
                </div>

                <section class="studio-notice" role="status" aria-live="polite">
                    <strong>重要提示：</strong>本页支持上传并引用 C# 源文件（保存到当前文章目录的 `code/`），但不支持在线编译或调试 tModLoader 工程。需要真实 API 调试时，请在本地 IDE（VSCode / Rider / VS）中进行。
                </section>

                <section class="studio-statusline" aria-label="工作模式">
                    <span class="studio-lazy-mode-tag">FLOW</span>
                    <span class="studio-statusline-sep">|</span>
                    <span class="studio-statusline-text">LazyVim Inspired UI</span>
                    <span class="studio-help">现代写作流：选文章 -> 编写 -> 预览 -> 发布</span>
                </section>

                <section class="studio-lazy-workspace" aria-label="LazyVim 风格工作台">
                    <aside class="studio-lazy-column studio-lazy-column--left" aria-label="左栏：Explorer">
                        <section class="studio-lazy-panel" aria-label="文章文件控制">
                            <h2 class="studio-panel-title">Explorer</h2>

                            <div class="studio-panel-section">
                                <label for="studio-existing-select">已有文章</label>
                                <select id="studio-existing-select" class="studio-select">
                                    <option value="">从站点目录选择文章...</option>
                                </select>
                                <button id="studio-load-existing" class="btn btn-small btn-outline" type="button">载入文章</button>
                            </div>

                            <div class="studio-panel-section">
                                <label>层级导航</label>
                                <div class="studio-grid-2">
                                    <div>
                                        <label for="studio-category-select">分类</label>
                                        <select id="studio-category-select" class="studio-select">
                                            <option value="">全部分类</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label for="studio-topic-select">Topic</label>
                                        <select id="studio-topic-select" class="studio-select">
                                            <option value="">全部主题</option>
                                        </select>
                                    </div>
                                </div>
                                <label for="studio-file-select">文件</label>
                                <select id="studio-file-select" class="studio-select">
                                    <option value="">从层级导航选择文章...</option>
                                </select>
                                <div id="studio-path-breadcrumb" class="studio-path-breadcrumb" aria-live="polite">路径导航：未选择</div>
                            </div>

                            <div class="studio-panel-section">
                                <label for="studio-target-path">目标路径</label>
                                <input id="studio-target-path" class="studio-input" type="text" value="怎么贡献/新文章.md" placeholder="例如：怎么贡献/新文章.md">
                                <button id="studio-load-path" class="btn btn-small btn-outline" type="button">按路径载入</button>
                            </div>

                            <div class="studio-panel-section">
                                <label>新建目录</label>
                                <label for="studio-directory-parent">父目录</label>
                                <input id="studio-directory-parent" class="studio-input" type="text" value="怎么贡献" placeholder="例如：怎么贡献">
                                <label for="studio-new-directory-name">目录名</label>
                                <input id="studio-new-directory-name" class="studio-input" type="text" placeholder="例如：进阶篇">
                                <button id="studio-create-directory" class="btn btn-small btn-outline" type="button">创建目录并切换</button>
                            </div>

                            <div class="studio-panel-section">
                                <label for="studio-filename">Markdown 文件名</label>
                                <input id="studio-filename" class="studio-input" type="text" value="新文章.md" placeholder="例如：新文章.md">
                            </div>

                            <details class="studio-advanced-panel studio-meta-panel" open>
                                <summary>Metadata</summary>
                                <div class="studio-panel-section">
                                    <label for="studio-meta-title">标题</label>
                                    <input id="studio-meta-title" class="studio-input" type="text" placeholder="教程标题">
                                </div>
                                <div class="studio-panel-section">
                                    <label for="studio-meta-author">作者</label>
                                    <input id="studio-meta-author" class="studio-input" type="text" placeholder="你的名字">
                                </div>
                                <div class="studio-panel-section">
                                    <label for="studio-meta-topic">Topic</label>
                                    <input id="studio-meta-topic" class="studio-input" type="text" placeholder="article-contribution">
                                </div>
                                <div class="studio-panel-section">
                                    <label for="studio-meta-description">简介</label>
                                    <textarea id="studio-meta-description" class="studio-editor studio-editor--compact" spellcheck="false" placeholder="一句话说明本文内容"></textarea>
                                </div>
                                <div class="studio-panel-section studio-grid-2">
                                    <div>
                                        <label for="studio-meta-order">排序</label>
                                        <input id="studio-meta-order" class="studio-input" type="number" min="0" step="1" placeholder="100">
                                    </div>
                                    <div>
                                        <label for="studio-meta-difficulty">难度</label>
                                        <select id="studio-meta-difficulty" class="studio-select">
                                            <option value="beginner">beginner</option>
                                            <option value="intermediate">intermediate</option>
                                            <option value="advanced">advanced</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="studio-panel-section">
                                    <label for="studio-meta-time">学习时间</label>
                                    <input id="studio-meta-time" class="studio-input" type="text" placeholder="25分钟">
                                </div>
                                <div class="studio-panel-section">
                                    <label for="studio-meta-prev-chapter">上一篇</label>
                                    <select id="studio-meta-prev-chapter" class="studio-select">
                                        <option value="">(无)</option>
                                    </select>
                                </div>
                                <div class="studio-panel-section">
                                    <label for="studio-meta-next-chapter">下一篇</label>
                                    <select id="studio-meta-next-chapter" class="studio-select">
                                        <option value="">(无)</option>
                                    </select>
                                </div>
                                <div class="studio-panel-section studio-grid-2">
                                    <div>
                                        <label for="studio-meta-min-c">min_c</label>
                                        <input id="studio-meta-min-c" class="studio-input" type="number" min="0" step="1" placeholder="0">
                                    </div>
                                    <div>
                                        <label for="studio-meta-min-t">min_t</label>
                                        <input id="studio-meta-min-t" class="studio-input" type="number" min="0" step="1" placeholder="0">
                                    </div>
                                </div>
                                <div class="studio-panel-section">
                                    <label>自定义颜色（colors）</label>
                                    <div class="studio-grid-2">
                                        <input id="studio-color-name" class="studio-input" type="text" placeholder="标识名，如 Mad">
                                        <input id="studio-color-value" class="studio-input" type="text" placeholder="#ff0000">
                                    </div>
                                    <button id="studio-color-add" class="btn btn-small btn-outline" type="button">添加颜色</button>
                                    <div id="studio-color-list" class="studio-meta-list" aria-live="polite"></div>
                                </div>
                                <div class="studio-panel-section">
                                    <label>颜色动画（colorChange）</label>
                                    <div class="studio-grid-2">
                                        <input id="studio-color-change-name" class="studio-input" type="text" placeholder="动画名，如 rainbow">
                                        <input id="studio-color-change-values" class="studio-input" type="text" placeholder="#f00,#0f0,#00f">
                                    </div>
                                    <button id="studio-color-change-add" class="btn btn-small btn-outline" type="button">添加动画</button>
                                    <div id="studio-color-change-list" class="studio-meta-list" aria-live="polite"></div>
                                </div>
                            </details>

                        </section>

                    </aside>

                    <section class="studio-lazy-column studio-lazy-column--center" aria-label="中栏：Editor">
                        <section class="studio-shell" aria-label="在线写作IDE">
                            <div class="studio-titlebar">article-studio · modern writer mode</div>
                            <div class="studio-workbench">
                                <section class="studio-editor-area">
                                    <div class="studio-commandbars">
                                        <section class="studio-toolbar studio-toolbar--embedded">
                                            <div class="studio-quick-actions">
                                                <button id="studio-insert-template" class="btn btn-small" type="button">插入模板</button>
                                                <button id="studio-insert-image" class="btn btn-small btn-outline" type="button">插入图片</button>
                                                <button id="studio-format-markdown" class="btn btn-small btn-outline" type="button">快速格式化</button>
                                                <button id="studio-toggle-fullscreen" class="btn btn-small btn-outline" type="button">专注模式</button>
                                                <button id="studio-open-viewer-preview" class="btn btn-small btn-outline" type="button">新标签预览</button>
                                            </div>
                                            <details class="studio-advanced-panel">
                                                <summary>更多操作</summary>
                                                <div class="studio-advanced-actions">
                                                    <button id="studio-copy-markdown" class="btn btn-small btn-outline" type="button">复制 Markdown</button>
                                                    <button id="studio-export" class="btn btn-small btn-outline" type="button">导出草稿 JSON</button>
                                                    <button id="studio-import" class="btn btn-small btn-outline" type="button">导入草稿 JSON</button>
                                                    <input id="studio-import-file" type="file" accept="application/json" hidden>
                                                    <button id="studio-reset" class="btn btn-small btn-outline" type="button">清空草稿</button>
                                                    <a id="studio-last-pr-link" class="btn btn-small btn-outline" href="#" target="_blank" rel="noopener noreferrer" hidden>打开最新 PR</a>
                                                </div>
                                            </details>
                                        </section>

                                        <section class="studio-syntaxbar studio-syntaxbar--embedded" aria-label="常用语法快捷按钮">
                                            <button class="btn btn-small btn-outline" type="button" data-studio-insert="bold">加粗</button>
                                            <button class="btn btn-small btn-outline" type="button" data-studio-insert="h2">二级标题</button>
                                            <button class="btn btn-small btn-outline" type="button" data-studio-insert="list">列表</button>
                                            <button class="btn btn-small btn-outline" type="button" data-studio-insert="quote">引用</button>
                                            <details class="studio-advanced-panel">
                                                <summary>更多片段</summary>
                                                <div class="studio-advanced-actions">
                                                    <button class="btn btn-small btn-outline" type="button" data-studio-insert="h1">大标题</button>
                                                    <button class="btn btn-small btn-outline" type="button" data-studio-insert="ref" title="插入 Markdown 链接">引用文档</button>
                                                    <button class="btn btn-small btn-outline" type="button" data-studio-insert="cs" title="插入 C# 片段语法">代码片段</button>
                                                    <button class="btn btn-small btn-outline" type="button" data-studio-insert="anim" title="插入动画片段语法">动画片段</button>
                                                    <button class="btn btn-small btn-outline" type="button" data-studio-insert="quiz-tf" title="插入判断题模板">判断题</button>
                                                    <button class="btn btn-small btn-outline" type="button" data-studio-insert="quiz-single" title="插入单选题模板">单选题</button>
                                                    <button class="btn btn-small btn-outline" type="button" data-studio-insert="quiz-multi" title="插入多选题模板">多选题</button>
                                                </div>
                                            </details>
                                        </section>
                                    </div>

                                    <div class="studio-tabs">
                                        <button id="studio-active-tab" class="studio-tab studio-tab--active" type="button" aria-current="page">新文章.md</button>
                                    </div>

                                    <div class="studio-panes">
                                        <div class="studio-pane">
                                            <div class="studio-pane-title">Markdown Editor</div>
                                            <textarea id="studio-markdown" class="studio-editor" spellcheck="false" placeholder="在这里编写 Markdown 教程内容...

```csharp
// C# 代码会在右侧预览中高亮
```"></textarea>
                                        </div>
                                        <div class="studio-pane">
                                            <div class="studio-pane-title">Preview（viewer.html 同级渲染）</div>
                                            <iframe id="studio-preview-frame" class="studio-preview-frame" title="Article Studio Viewer Preview" loading="lazy"></iframe>
                                        </div>
                                    </div>

                                    <div class="studio-statusbar">
                                        <span id="studio-status">就绪</span>
                                        <span id="studio-current-path">目标: 怎么贡献/新文章.md</span>
                                        <span id="studio-stats">0 行 · 0 字</span>
                                    </div>
                                </section>
                            </div>
                        </section>
                    </section>

                    <aside class="studio-lazy-column studio-lazy-column--right" aria-label="右栏：Publish">
                        <section class="studio-lazy-panel" aria-label="页面选项与 PR 发布">
                            <h2 class="studio-panel-title">Publish</h2>

                            <div class="studio-panel-section">
                                <label for="studio-pr-worker-url">Worker API 地址</label>
                                <input id="studio-pr-worker-url" class="studio-input" type="text" placeholder="https://xxx.workers.dev/api/create-pr">
                                <span class="studio-help">若出现 Failed to fetch，建议改为可访问的 Worker 自定义域名。</span>
                            </div>

                            <div class="studio-panel-section">
                                <label>GitHub 账号</label>
                                <div class="studio-auth-actions">
                                    <button id="studio-auth-login" class="btn btn-small" type="button">GitHub 登录</button>
                                    <button id="studio-auth-logout" class="btn btn-small btn-outline" type="button">退出</button>
                                </div>
                                <span id="studio-auth-status" class="studio-auth-status">未登录</span>
                            </div>

                            <div class="studio-panel-section">
                                <label for="studio-pr-title">PR 标题（可选）</label>
                                <input id="studio-pr-title" class="studio-input" type="text" placeholder="例如：docs: 更新 某章节">
                            </div>

                            <div class="studio-panel-section">
                                <label for="studio-asset-upload">上传附件（图片 + C#）</label>
                                <input id="studio-asset-upload" class="studio-input studio-input--file" type="file" accept="image/*,.cs,text/x-csharp" multiple>
                                <span class="studio-help">可从本地任意目录选择文件。图片与 C# 文件会自动分流并随提交一起上传。</span>
                            </div>

                            <div class="studio-panel-section">
                                <label for="studio-image-upload">插入图片</label>
                                <input id="studio-image-upload" class="studio-input studio-input--file" type="file" accept="image/*" multiple>
                                <span class="studio-help">上传后会插入 Markdown 图片语法，并在右侧保存预览。图片信息会随草稿自动保存。</span>
                                <div id="studio-image-list" class="studio-image-list" aria-live="polite"></div>
                            </div>

                            <div class="studio-panel-section">
                                <label for="studio-csharp-upload">插入 C# 文件</label>
                                <input id="studio-csharp-upload" class="studio-input studio-input--file" type="file" accept=".cs,text/x-csharp" multiple>
                                <span class="studio-help">默认存放到当前文章目录的 code/ 目录。若同名冲突会阻止并提示。</span>
                                <div id="studio-csharp-list" class="studio-image-list" aria-live="polite"></div>
                            </div>

                            <div class="studio-panel-section">
                                <label for="studio-csharp-symbol-select">C# 符号引用</label>
                                <select id="studio-csharp-symbol-select" class="studio-select">
                                    <option value="">先上传 C# 文件并选择符号...</option>
                                </select>
                                <button id="studio-csharp-insert-symbol" class="btn btn-small btn-outline" type="button">插入符号引用</button>
                            </div>

                            <div class="studio-panel-section">
                                <label for="studio-pr-chain-select">PR 链（继续提交到同一 PR）</label>
                                <select id="studio-pr-chain-select" class="studio-select">
                                    <option value="">创建新 PR（默认）</option>
                                </select>
                                <button id="studio-refresh-my-prs" class="btn btn-small btn-outline" type="button">刷新我的未关闭 PR</button>
                                <span class="studio-help">仅 GitHub 登录可用。选择后会把本次内容提交到同一个 PR 分支。</span>
                            </div>

                            <div class="studio-panel-section">
                                <label for="studio-toggle-preview-image-notice">预览图片提示</label>
                                <button id="studio-toggle-preview-image-notice" class="btn btn-small btn-outline" type="button">已开启</button>
                                <span class="studio-help">开启后，当右侧预览命中本地草稿图片时，会在底部状态栏提示。</span>
                            </div>

                            <div class="studio-panel-section">
                                <button id="studio-submit-pr" class="btn btn-small studio-btn-primary" type="button">提交 PR</button>
                            </div>

                            <details class="studio-advanced-panel">
                                <summary>高级发布选项</summary>
                                <div class="studio-panel-section">
                                    <label for="studio-pr-shared-key">兼容密钥（可选）</label>
                                    <input id="studio-pr-shared-key" class="studio-input" type="password" placeholder="仅兼容旧版 Worker 的 STUDIO_SHARED_KEY" autocomplete="current-password">
                                    <span class="studio-help">优先使用 GitHub 登录；仅在 Worker 仍启用密钥模式时填写。</span>
                                </div>
                            </details>
                        </section>
                    </aside>
                </section>
            </div>
        </div>
    </main>

    <script src="/shared/assets/js/site-core.js"></script>
    <script src="/site/assets/js/navigation.js"></script>
    <script src="/site/assets/js/marked.min.js"></script>
    <script src="/site/assets/js/prism.min.js"></script>
    <script>
        if (window.SITE) window.SITE.bootstrapPage('article-studio');
    </script>
    <script src="/site/assets/js/accent-theme.js"></script>
    <script src="/site/assets/js/article-studio.js"></script>
</body>
</html>
