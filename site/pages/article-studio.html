<!DOCTYPE html>
<html lang="zh-CN" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>在线写作IDE（Markdown）</title>
    <link rel="stylesheet" href="/site/assets/css/style.css">
    <link rel="stylesheet" href="/site/assets/css/workbench-phase.css">
    <link rel="stylesheet" href="/site/assets/css/prism.min.css">
    <link rel="stylesheet" href="/site/assets/css/vs2022-theme.css">
    <link rel="stylesheet" href="/site/assets/css/article-studio.css">
    <link rel="icon" type="image/png" href="/site/assets/imgs/Green_tModLoader.png">
    <script src="/site/assets/js/theme-init.js"></script>
</head>
<body class="workbench-page viewer-page">
    <header class="site-header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <a href="../index.html">
                        <img src="/site/assets/imgs/Green_tModLoader.png" alt="泰拉瑞亚Mod制作教程" class="logo-image">
                        <h1 class="site-title">在线写作IDE</h1>
                    </a>
                </div>
                <nav class="main-nav" id="main-nav">
                    <ul class="nav-list">
                        <li class="nav-item"><a href="../index.html" class="nav-link">首页</a></li>
                        <li class="nav-item"><a href="folder.html" class="nav-link">文档</a></li>
                        <li class="nav-item"><a href="article-studio.html" class="nav-link active" aria-current="page">在线写作IDE</a></li>
                        <li class="nav-item"><a href="shader-playground.html" class="nav-link">Shader</a></li>
                        <li class="nav-item"><a href="shader-gallery.html" class="nav-link">Gallery</a></li>
                        <li class="nav-item"><a href="../qa.html" class="nav-link">问答</a></li>
                        <li class="nav-item"><a href="https://github.com/DPapyru/DPapyru.github.io" class="nav-link" target="_blank" rel="noopener noreferrer">GitHub</a></li>
                        <li class="nav-item nav-accent">
                            <label class="visually-hidden" for="accent-select">配色</label>
                            <select class="nav-accent-select" id="accent-select" aria-label="配色">
                                <option value="green">绿色</option>
                                <option value="blue">蓝色</option>
                                <option value="purple">紫色</option>
                                <option value="orange">橙色</option>
                                <option value="red">红色</option>
                                <option value="cyan">青色</option>
                                <option value="black">黑色</option>
                                <option value="white">白色</option>
                                <option value="vs">VS</option>
                                <option value="git">Git</option>
                                <option value="terraria-crimson">猩红</option>
                                <option value="terraria-corruption">腐化</option>
                                <option value="terraria-hallow">神圣</option>
                                <option value="terraria-tundra">冰原</option>
                                <option value="terraria-desert">沙漠</option>
                            </select>
                        </li>
                    </ul>
                </nav>
                <button class="mobile-menu-toggle" type="button" aria-label="切换菜单" aria-controls="main-nav" aria-expanded="false">
                    <span class="bar"></span>
                    <span class="bar"></span>
                    <span class="bar"></span>
                </button>
            </div>
        </div>
    </header>

    <main class="workbench-main main-content article-studio-main">
        <div class="container">
            <div class="content-wrapper article-studio-wrapper">
                <div class="tutorial-header">
                    <h1 class="tutorial-title">Markdown 写作工作区</h1>
                    <div class="tutorial-meta">
                        <span class="author">定位: <span>仅 Markdown 编辑 + viewer.html 同级预览</span></span>
                    </div>
                </div>

                <section class="studio-notice" role="status" aria-live="polite">
                    <strong>重要提示：</strong>本页支持上传并引用 C# 源文件（保存到当前文章目录的 `code/`），但不支持在线编译或调试 tModLoader 工程。需要真实 API 调试时，请在本地 IDE（VSCode / Rider / VS）中进行。
                </section>

                <section class="studio-statusline" aria-label="工作模式">
                    <span class="studio-lazy-mode-tag">FLOW</span>
                    <span class="studio-statusline-sep">|</span>
                    <span class="studio-statusline-text">LazyVim Inspired UI</span>
                    <span class="studio-help">现代写作流：选文章 -> 编写 -> 预览 -> 发布</span>
                </section>

                <section class="studio-lazy-workspace" aria-label="LazyVim 风格工作台">
                    <aside id="studio-left-panel-modal" class="studio-lazy-column studio-lazy-column--left modal studio-side-panel-modal" aria-label="左栏：Explorer" aria-hidden="true">
                        <div class="modal-content studio-side-panel-modal-content" role="dialog" aria-modal="true" aria-labelledby="studio-left-panel-title">
                            <section class="studio-lazy-panel studio-side-panel-shell" aria-label="文章文件控制">
                                <div class="studio-side-panel-header">
                                    <h2 id="studio-left-panel-title" class="studio-panel-title">Explorer</h2>
                                    <button id="studio-left-panel-close" class="modal-close" type="button" aria-label="关闭 Explorer">×</button>
                                </div>

                            <div class="studio-panel-section">
                                <label for="studio-existing-select">已有文章</label>
                                <select id="studio-existing-select" class="studio-select">
                                    <option value="">从站点目录选择文章...</option>
                                </select>
                                <button id="studio-load-existing" class="btn btn-small btn-outline" type="button">载入文章</button>
                            </div>

                            <div class="studio-panel-section">
                                <label>层级导航</label>
                                <div class="studio-grid-2">
                                    <div>
                                        <label for="studio-category-select">分类</label>
                                        <select id="studio-category-select" class="studio-select">
                                            <option value="">全部分类</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label for="studio-topic-select">Topic</label>
                                        <select id="studio-topic-select" class="studio-select">
                                            <option value="">全部主题</option>
                                        </select>
                                    </div>
                                </div>
                                <label for="studio-file-select">文件</label>
                                <select id="studio-file-select" class="studio-select">
                                    <option value="">从层级导航选择文章...</option>
                                </select>
                                <div id="studio-path-breadcrumb" class="studio-path-breadcrumb" aria-live="polite">路径导航：未选择</div>
                            </div>

                            <div class="studio-panel-section">
                                <label for="studio-target-path">目标路径</label>
                                <input id="studio-target-path" class="studio-input" type="text" value="怎么贡献/新文章.md" placeholder="例如：怎么贡献/新文章.md">
                                <button id="studio-load-path" class="btn btn-small btn-outline" type="button">按路径载入</button>
                            </div>

                            <div class="studio-panel-section">
                                <label>新建目录</label>
                                <label for="studio-directory-parent">父目录</label>
                                <input id="studio-directory-parent" class="studio-input" type="text" value="怎么贡献" placeholder="例如：怎么贡献">
                                <label for="studio-new-directory-name">目录名</label>
                                <input id="studio-new-directory-name" class="studio-input" type="text" placeholder="例如：进阶篇">
                                <button id="studio-create-directory" class="btn btn-small btn-outline" type="button">创建目录并切换</button>
                            </div>

                            <div class="studio-panel-section">
                                <label for="studio-filename">Markdown 文件名</label>
                                <input id="studio-filename" class="studio-input" type="text" value="新文章.md" placeholder="例如：新文章.md">
                            </div>

                            <details class="studio-advanced-panel studio-meta-panel" open>
                                <summary>Metadata</summary>
                                <div class="studio-panel-section">
                                    <label for="studio-meta-title">标题</label>
                                    <input id="studio-meta-title" class="studio-input" type="text" placeholder="教程标题">
                                </div>
                                <div class="studio-panel-section">
                                    <label for="studio-meta-author">作者</label>
                                    <input id="studio-meta-author" class="studio-input" type="text" placeholder="你的名字">
                                </div>
                                <div class="studio-panel-section">
                                    <label for="studio-meta-topic">Topic</label>
                                    <input id="studio-meta-topic" class="studio-input" type="text" placeholder="article-contribution">
                                </div>
                                <div class="studio-panel-section">
                                    <label for="studio-meta-description">简介</label>
                                    <textarea id="studio-meta-description" class="studio-editor studio-editor--compact" spellcheck="false" placeholder="一句话说明本文内容"></textarea>
                                </div>
                                <div class="studio-panel-section studio-grid-2">
                                    <div>
                                        <label for="studio-meta-order">排序</label>
                                        <input id="studio-meta-order" class="studio-input" type="number" min="0" step="1" placeholder="100">
                                    </div>
                                    <div>
                                        <label for="studio-meta-difficulty">难度</label>
                                        <select id="studio-meta-difficulty" class="studio-select">
                                            <option value="beginner">beginner</option>
                                            <option value="intermediate">intermediate</option>
                                            <option value="advanced">advanced</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="studio-panel-section">
                                    <label for="studio-meta-time">学习时间</label>
                                    <input id="studio-meta-time" class="studio-input" type="text" placeholder="25分钟">
                                </div>
                                <div class="studio-panel-section">
                                    <label for="studio-meta-prev-chapter">上一篇</label>
                                    <select id="studio-meta-prev-chapter" class="studio-select">
                                        <option value="">(无)</option>
                                    </select>
                                </div>
                                <div class="studio-panel-section">
                                    <label for="studio-meta-next-chapter">下一篇</label>
                                    <select id="studio-meta-next-chapter" class="studio-select">
                                        <option value="">(无)</option>
                                    </select>
                                </div>
                                <div class="studio-panel-section studio-grid-2">
                                    <div>
                                        <label for="studio-meta-min-c">min_c</label>
                                        <input id="studio-meta-min-c" class="studio-input" type="number" min="0" step="1" placeholder="0">
                                    </div>
                                    <div>
                                        <label for="studio-meta-min-t">min_t</label>
                                        <input id="studio-meta-min-t" class="studio-input" type="number" min="0" step="1" placeholder="0">
                                    </div>
                                </div>
                                <div class="studio-panel-section">
                                    <label>自定义颜色（colors）</label>
                                    <div class="studio-grid-2">
                                        <input id="studio-color-name" class="studio-input" type="text" placeholder="标识名，如 Mad">
                                        <input id="studio-color-value" class="studio-input" type="text" placeholder="#ff0000">
                                    </div>
                                    <button id="studio-color-add" class="btn btn-small btn-outline" type="button">添加颜色</button>
                                    <div id="studio-color-list" class="studio-meta-list" aria-live="polite"></div>
                                </div>
                                <div class="studio-panel-section">
                                    <label>颜色动画（colorChange）</label>
                                    <div class="studio-grid-2">
                                        <input id="studio-color-change-name" class="studio-input" type="text" placeholder="动画名，如 rainbow">
                                        <input id="studio-color-change-values" class="studio-input" type="text" placeholder="#f00,#0f0,#00f">
                                    </div>
                                    <button id="studio-color-change-add" class="btn btn-small btn-outline" type="button">添加动画</button>
                                    <div id="studio-color-change-list" class="studio-meta-list" aria-live="polite"></div>
                                </div>
                            </details>

                            </section>
                        </div>
                    </aside>

                    <section class="studio-lazy-column studio-lazy-column--center" aria-label="中栏：Editor">
                        <section class="studio-shell" aria-label="在线写作IDE">
                            <div class="studio-titlebar">article-studio · modern writer mode</div>
                            <div class="studio-workbench">
                                <section class="studio-editor-area">
                                    <div class="studio-commandbars">
                                        <section class="studio-toolbar studio-toolbar--embedded">
                                            <div class="studio-quick-actions">
                                                <button id="studio-open-explorer" class="btn btn-small btn-outline" type="button" aria-expanded="false" aria-controls="studio-left-panel-modal">文章额外内容</button>
                                                <button id="studio-open-publish" class="btn btn-small btn-outline" type="button" aria-expanded="false" aria-controls="studio-right-panel-modal">提交</button>
                                                <button id="studio-open-markdown-guide" class="btn btn-small btn-outline" type="button" aria-expanded="false" aria-controls="studio-markdown-guide-modal">项目Markdown教程</button>
                                                <button id="studio-run-draft-check" class="btn btn-small btn-outline" type="button" aria-expanded="false" aria-controls="studio-draft-check-modal">发布前自检</button>
                                                <button id="studio-insert-template" class="btn btn-small" type="button">插入模板</button>
                                                <button id="studio-insert-image" class="btn btn-small btn-outline" type="button">插入图片</button>
                                                <button id="studio-format-markdown" class="btn btn-small btn-outline" type="button">快速格式化</button>
                                                <button id="studio-toggle-fullscreen" class="btn btn-small btn-outline" type="button">专注模式</button>
                                                <button id="studio-open-viewer-preview" class="btn btn-small btn-outline" type="button">新标签预览</button>
                                                <button id="studio-flowchart-toggle" class="btn btn-small btn-outline studio-focus-only" type="button" aria-expanded="false" aria-controls="studio-flowchart-modal">流程图工作台</button>
                                            </div>
                                            <details class="studio-advanced-panel">
                                                <summary>更多操作</summary>
                                                <div class="studio-advanced-actions">
                                                    <button id="studio-copy-markdown" class="btn btn-small btn-outline" type="button">复制 Markdown</button>
                                                    <button id="studio-export" class="btn btn-small btn-outline" type="button">导出草稿 JSON</button>
                                                    <button id="studio-import" class="btn btn-small btn-outline" type="button">导入草稿 JSON</button>
                                                    <input id="studio-import-file" type="file" accept="application/json" hidden>
                                                    <button id="studio-reset" class="btn btn-small btn-outline" type="button">清空草稿</button>
                                                    <a id="studio-last-pr-link" class="btn btn-small btn-outline" href="#" target="_blank" rel="noopener noreferrer" hidden>打开最新 PR</a>
                                                </div>
                                            </details>
                                        </section>

                                        <section class="studio-syntaxbar studio-syntaxbar--embedded" aria-label="常用语法快捷按钮">
                                            <button class="btn btn-small btn-outline" type="button" data-studio-insert="bold">加粗</button>
                                            <button class="btn btn-small btn-outline" type="button" data-studio-insert="h2">二级标题</button>
                                            <button class="btn btn-small btn-outline" type="button" data-studio-insert="list">列表</button>
                                            <button class="btn btn-small btn-outline" type="button" data-studio-insert="quote">引用</button>
                                            <details class="studio-advanced-panel">
                                                <summary>更多片段</summary>
                                                <div class="studio-advanced-actions">
                                                    <button class="btn btn-small btn-outline" type="button" data-studio-insert="ref" title="插入 Markdown 链接">引用文档</button>
                                                    <button class="btn btn-small btn-outline" type="button" data-studio-insert="anim" title="插入动画片段语法">动画片段</button>
                                                    <button class="btn btn-small btn-outline" type="button" data-studio-insert="animcs-block" title="插入 animcs 代码块（第一行是 anims/*.cs）">animcs 代码块</button>
                                                    <button class="btn btn-small btn-outline" type="button" data-studio-insert="color-inline" title="插入单色文本语法">单色文本</button>
                                                    <button class="btn btn-small btn-outline" type="button" data-studio-insert="color-change-inline" title="插入颜色动画文本语法">颜色动画文本</button>
                                                    <button class="btn btn-small btn-outline" type="button" data-studio-insert="quiz-tf" title="插入判断题模板">判断题</button>
                                                    <button class="btn btn-small btn-outline" type="button" data-studio-insert="quiz-choice" title="插入 choice 类型题目模板">选择题</button>
                                                    <button class="btn btn-small btn-outline" type="button" data-studio-insert="quiz-multi" title="插入多选题模板">多选题</button>
                                                </div>
                                            </details>
                                        </section>
                                    </div>

                                    <div class="studio-tabs">
                                        <button id="studio-active-tab" class="studio-tab studio-tab--active" type="button" aria-current="page">新文章.md</button>
                                    </div>

                                    <div class="studio-panes">
                                        <div class="studio-pane">
                                            <div class="studio-pane-title">Markdown Editor</div>
                                            <textarea id="studio-markdown" class="studio-editor" spellcheck="false" placeholder="在这里编写 Markdown 教程内容...

```csharp
// C# 代码会在右侧预览中高亮
```"></textarea>
                                        </div>
                                        <div class="studio-pane">
                                            <div class="studio-pane-title">Preview（viewer.html 同级渲染）</div>
                                            <iframe id="studio-preview-frame" class="studio-preview-frame" title="Article Studio Viewer Preview" loading="lazy"></iframe>
                                        </div>
                                    </div>

                                    <div class="studio-statusbar">
                                        <span id="studio-status">就绪</span>
                                        <span id="studio-current-path">目标: 怎么贡献/新文章.md</span>
                                        <span id="studio-stats">0 行 · 0 字</span>
                                    </div>
                                </section>
                            </div>
                        </section>
                    </section>

                    <aside id="studio-right-panel-modal" class="studio-lazy-column studio-lazy-column--right modal studio-side-panel-modal" aria-label="右栏：Publish" aria-hidden="true">
                        <div class="modal-content studio-side-panel-modal-content" role="dialog" aria-modal="true" aria-labelledby="studio-right-panel-title">
                            <section class="studio-lazy-panel studio-side-panel-shell" aria-label="页面选项与 PR 发布">
                                <div class="studio-side-panel-header">
                                    <h2 id="studio-right-panel-title" class="studio-panel-title">Publish</h2>
                                    <button id="studio-right-panel-close" class="modal-close" type="button" aria-label="关闭 Publish">×</button>
                                </div>

                            <div class="studio-panel-section">
                                <label for="studio-pr-worker-url">Worker API 地址</label>
                                <input id="studio-pr-worker-url" class="studio-input" type="text" placeholder="https://xxx.workers.dev/api/create-pr">
                                <span class="studio-help">若出现 Failed to fetch，建议改为可访问的 Worker 自定义域名。</span>
                            </div>

                            <div class="studio-panel-section">
                                <label>GitHub 账号</label>
                                <div class="studio-auth-actions">
                                    <button id="studio-auth-login" class="btn btn-small" type="button">GitHub 登录</button>
                                    <button id="studio-auth-logout" class="btn btn-small btn-outline" type="button">退出</button>
                                </div>
                                <span id="studio-auth-status" class="studio-auth-status">未登录</span>
                            </div>

                            <div class="studio-panel-section">
                                <label for="studio-pr-title">PR 标题（可选）</label>
                                <input id="studio-pr-title" class="studio-input" type="text" placeholder="例如：文章流: <作者>的文章流">
                            </div>

                            <div class="studio-panel-section">
                                <label for="studio-asset-upload">上传附件（图片/GIF/视频 + C#）</label>
                                <input id="studio-asset-upload" class="studio-input studio-input--file" type="file" accept="image/*,video/mp4,video/webm,.mp4,.webm,.cs,text/x-csharp" multiple>
                                <span class="studio-help">可从本地任意目录选择文件。图片、视频与 C# 文件会自动分流并随提交一起上传。</span>
                            </div>

                            <div class="studio-panel-section">
                                <label for="studio-image-upload">插入图片</label>
                                <input id="studio-image-upload" class="studio-input studio-input--file" type="file" accept="image/*" multiple>
                                <span class="studio-help">上传后会插入 Markdown 图片语法，并在右侧保存预览。图片信息会随草稿自动保存。</span>
                                <div id="studio-image-list" class="studio-image-list" aria-live="polite"></div>
                            </div>

                            <div class="studio-panel-section">
                                <label for="studio-media-upload">插入视频（mp4/webm）</label>
                                <input id="studio-media-upload" class="studio-input studio-input--file" type="file" accept="video/mp4,video/webm,.mp4,.webm" multiple>
                                <span class="studio-help">上传后会插入 Markdown 引用语法。视频信息会随草稿自动保存。</span>
                                <div id="studio-media-list" class="studio-image-list" aria-live="polite"></div>
                            </div>

                            <div class="studio-panel-section">
                                <label for="studio-csharp-upload">插入 C# 文件</label>
                                <input id="studio-csharp-upload" class="studio-input studio-input--file" type="file" accept=".cs,text/x-csharp" multiple>
                                <span class="studio-help">默认存放到当前文章目录的 code/ 目录。若同名冲突会阻止并提示。</span>
                                <div id="studio-csharp-list" class="studio-image-list" aria-live="polite"></div>
                            </div>

                            <div class="studio-panel-section">
                                <label for="studio-csharp-symbol-select">C# 符号引用</label>
                                <select id="studio-csharp-symbol-select" class="studio-select">
                                    <option value="">先上传 C# 文件并选择符号...</option>
                                </select>
                                <button id="studio-csharp-insert-symbol" class="btn btn-small btn-outline" type="button">插入符号引用</button>
                            </div>

                            <div class="studio-panel-section">
                                <label for="studio-pr-chain-select">PR 链（继续提交到同一 PR）</label>
                                <select id="studio-pr-chain-select" class="studio-select">
                                    <option value="">创建新 PR（默认）</option>
                                </select>
                                <button id="studio-refresh-my-prs" class="btn btn-small btn-outline" type="button">刷新我的未关闭 PR</button>
                                <span class="studio-help">仅 GitHub 登录可用。选择后会把本次内容提交到同一个 PR 分支。</span>
                            </div>

                            <div class="studio-panel-section">
                                <label for="studio-clear-assets">附件缓存</label>
                                <button id="studio-clear-assets" class="btn btn-small btn-outline" type="button">清空已上传附件</button>
                                <span class="studio-help">新开 PR 前建议先清理附件，继续同一 PR 时可保留附件直接追加提交。</span>
                            </div>

                            <div class="studio-panel-section">
                                <label for="studio-toggle-preview-image-notice">预览图片提示</label>
                                <button id="studio-toggle-preview-image-notice" class="btn btn-small btn-outline" type="button">已开启</button>
                                <span class="studio-help">开启后，当右侧预览命中本地草稿图片时，会在底部状态栏提示。</span>
                            </div>

                            <div class="studio-panel-section">
                                <button id="studio-submit-pr" class="btn btn-small studio-btn-primary" type="button">提交 PR</button>
                            </div>

                            <details class="studio-advanced-panel">
                                <summary>高级发布选项</summary>
                                <div class="studio-panel-section">
                                    <label for="studio-pr-shared-key">兼容密钥（可选）</label>
                                    <input id="studio-pr-shared-key" class="studio-input" type="password" placeholder="仅兼容旧版 Worker 的 STUDIO_SHARED_KEY" autocomplete="current-password">
                                    <span class="studio-help">优先使用 GitHub 登录；仅在 Worker 仍启用密钥模式时填写。</span>
                                </div>
                            </details>
                            </section>
                        </div>
                    </aside>
                </section>
            </div>
        </div>
    </main>

    <div id="studio-flowchart-modal" class="modal studio-flowchart-modal" aria-hidden="true">
        <div class="modal-content studio-flowchart-modal-content" role="dialog" aria-modal="true" aria-labelledby="studio-flowchart-title">
            <div class="modal-header studio-flowchart-modal-header">
                <h3 id="studio-flowchart-title" class="modal-title">Flowchart Studio (v1)</h3>
                <button id="studio-flowchart-modal-close" class="modal-close" type="button" aria-label="关闭">×</button>
            </div>
            <div class="modal-body studio-flowchart-modal-body">
                <div class="studio-flowchart-toolbar">
                    <div class="studio-flowchart-toolbar-head">
                        <span id="studio-flowchart-binding-status" class="studio-flowchart-binding-status">当前绑定：未命中，待新建</span>
                    </div>
                    <div class="studio-flowchart-toolbar-actions">
                        <button id="studio-flowchart-mode-visual" class="btn btn-small btn-outline studio-flowchart-mode-btn studio-flowchart-mode-btn--active" type="button">可视化</button>
                        <button id="studio-flowchart-mode-source" class="btn btn-small btn-outline studio-flowchart-mode-btn" type="button">高级源码</button>
                        <button id="studio-flowchart-rebind" class="btn btn-small btn-outline" type="button">重新绑定光标位置</button>
                        <button id="studio-flowchart-bind-new" class="btn btn-small btn-outline" type="button">新建并绑定</button>
                        <button id="studio-flowchart-realtime-toggle" class="btn btn-small btn-outline" type="button">实时写入：已开启</button>
                    </div>
                </div>

                <div id="studio-flowchart-visual-panel" class="studio-flowchart-panel">
                    <div class="studio-flowchart-section">
                        <label for="studio-flowchart-direction">方向</label>
                        <select id="studio-flowchart-direction" class="studio-select">
                            <option value="TD">TD（上到下）</option>
                            <option value="LR">LR（左到右）</option>
                        </select>
                    </div>

                    <div class="studio-flowchart-section">
                        <div class="studio-flowchart-section-head">
                            <strong>节点列表</strong>
                            <button id="studio-flowchart-add-node" class="btn btn-small btn-outline" type="button">新增节点</button>
                        </div>
                        <div id="studio-flowchart-node-list" class="studio-flowchart-list" aria-live="polite"></div>
                    </div>

                    <div class="studio-flowchart-section">
                        <div class="studio-flowchart-section-head">
                            <strong>连线列表</strong>
                            <button id="studio-flowchart-add-edge" class="btn btn-small btn-outline" type="button">新增连线</button>
                        </div>
                        <div id="studio-flowchart-edge-list" class="studio-flowchart-list" aria-live="polite"></div>
                    </div>
                </div>

                <div id="studio-flowchart-source-panel" class="studio-flowchart-panel">
                    <div class="studio-flowchart-section">
                        <div class="studio-flowchart-section-head">
                            <strong>Mermaid 源码（实时生成）</strong>
                            <div class="studio-flowchart-inline-actions">
                                <button id="studio-flowchart-copy-source" class="btn btn-small btn-outline" type="button">复制源码</button>
                                <button id="studio-flowchart-apply" class="btn btn-small btn-outline" type="button">应用到文档</button>
                            </div>
                        </div>
                        <textarea id="studio-flowchart-generated-source" class="studio-editor studio-flowchart-source" spellcheck="false" readonly></textarea>
                    </div>

                    <div class="studio-flowchart-section">
                        <div class="studio-flowchart-section-head">
                            <strong>高级源码模式</strong>
                            <div class="studio-flowchart-inline-actions">
                                <button id="studio-flowchart-source-apply" class="btn btn-small btn-outline" type="button">应用到文档</button>
                                <button id="studio-flowchart-try-visual" class="btn btn-small btn-outline" type="button">尝试回到可视化</button>
                                <button id="studio-flowchart-source-reset" class="btn btn-small btn-outline" type="button">放弃本次修改</button>
                            </div>
                        </div>
                        <textarea id="studio-flowchart-source-editor" class="studio-editor studio-flowchart-source" spellcheck="false" placeholder="在此输入 Mermaid flowchart 源码"></textarea>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="studio-csharp-editor-modal" class="modal studio-csharp-editor-modal" aria-hidden="true">
        <div class="modal-content studio-csharp-editor-modal-content" role="dialog" aria-modal="true" aria-labelledby="studio-csharp-editor-title">
            <div class="modal-header studio-csharp-editor-modal-header">
                <h3 id="studio-csharp-editor-title" class="modal-title">编辑 C# 文件</h3>
                <button id="studio-csharp-editor-close" class="modal-close" type="button" aria-label="关闭">×</button>
            </div>
            <div class="modal-body studio-csharp-editor-modal-body">
                <div class="studio-csharp-editor-pane">
                    <label for="studio-csharp-editor-text">源码（仅点击保存才会生效）</label>
                    <textarea id="studio-csharp-editor-text" class="studio-editor studio-csharp-editor-text" spellcheck="false" placeholder="// 在这里编辑 C# 代码"></textarea>
                </div>
                <div class="studio-csharp-editor-pane">
                    <label for="studio-csharp-editor-preview-code">语法高亮预览</label>
                    <pre class="studio-csharp-editor-preview"><code id="studio-csharp-editor-preview-code" class="language-csharp"></code></pre>
                </div>
            </div>
            <div class="modal-footer studio-csharp-editor-modal-footer">
                <button id="studio-csharp-editor-cancel" class="btn btn-small btn-outline" type="button">取消</button>
                <button id="studio-csharp-editor-save" class="btn btn-small" type="button">保存</button>
            </div>
        </div>
    </div>

    <aside id="studio-markdown-guide-modal" class="studio-lazy-column studio-lazy-column--right modal studio-side-panel-modal" aria-label="项目 Markdown 完整手册" aria-hidden="true">
        <div class="modal-content studio-side-panel-modal-content" role="dialog" aria-modal="true" aria-labelledby="studio-markdown-guide-title">
            <section class="studio-lazy-panel studio-side-panel-shell">
                <header class="studio-side-panel-header">
                    <h2 id="studio-markdown-guide-title" class="studio-panel-title">项目 Markdown 完整手册</h2>
                    <button id="studio-markdown-guide-close" class="modal-close" type="button" aria-label="关闭">×</button>
                </header>
                <div class="studio-panel-section studio-markdown-guide-content">
                    <section class="studio-guide-section">
                        <h4>1. 标准 Markdown（建议全部掌握）</h4>
                        <pre><code># 一级标题
## 二级标题

普通段落，支持 **加粗**、*斜体*、`行内代码`、~~删除线~~。

- 无序列表
1. 有序列表
> 引用块
---

| 列1 | 列2 |
| --- | --- |
| A   | B   |

```csharp
// 代码块
```</code></pre>
                        <p>项目文章不使用任务清单语法（<code>- [ ]</code> / <code>- [x]</code>）。</p>
                    </section>

                    <section class="studio-guide-section">
                        <h4>2. 文档链接与媒体引用</h4>
                        <pre><code>[上一篇](./上一篇.md)

![普通图片](./images/demo.png)
![动图](./images/demo.gif)
![MP4 视频](./media/demo.mp4)
![WEBM 视频](./media/demo.webm)</code></pre>
                        <p>文档链接建议使用相对路径并以 <code>.md</code> 结尾。</p>
                    </section>

                    <section class="studio-guide-section">
                        <h4>3. Front Matter（项目字段全集）</h4>
                        <pre><code>---
title: 教程标题
author: 你的名字
topic: article-contribution
description: 一句话说明本文内容
order: 100
difficulty: beginner
time: 25分钟
prev_chapter: 上一章.md
next_chapter: 下一章.md
source_cs:
  - code/Demo.cs
min_c: 1
min_t: 1
colors:
  Mad: "#ff4d4f"
colorChange:
  rainbow:
    - "#ff0000"
    - "#00ff00"
    - "#0000ff"
---</code></pre>
                        <p>必填建议：<code>title</code>、<code>description</code>、<code>topic</code>、<code>difficulty</code>、<code>time</code>。</p>
                    </section>

                    <section class="studio-guide-section">
                        <h4>4. C# 引用指令（完整）</h4>
                        <pre><code>{{cs:./code/Demo.cs}}
{{cs:./code/Demo.cs#cs:t:命名空间.类型名|类型示例}}
{{cs:./code/Demo.cs#cs:m:命名空间.类型名.方法名(参数类型)|方法示例}}
{{cs:./code/Demo.cs#cs:p:命名空间.类型名.属性名|属性示例}}
{{cs:./code/Demo.cs#cs:f:命名空间.类型名.字段名|字段示例}}
{{cs:./code/Demo.cs#cs:c:命名空间.类型名.常量名|常量示例}}
{{cs:./code/Demo.cs#cs:e:命名空间.枚举类型.成员名|枚举成员示例}}</code></pre>
                        <p>推荐先上传 C# 文件，再用“插入符号引用”按钮生成精确选择器。</p>
                    </section>

                    <section class="studio-guide-section">
                        <h4>5. 动画语法（两种）</h4>
                        <pre><code>{{anim:anims/demo-basic.cs}}

```animcs
anims/demo-basic.cs
```</code></pre>
                        <p><code>anims/*.cs</code> 是硬性要求，路径与大小写必须正确。</p>
                    </section>

                    <section class="studio-guide-section">
                        <h4>6. Mermaid 与流程图工作台</h4>
                        <pre><code>```mermaid
flowchart TD
    Start[开始] --> Edit[编写]
    Edit --> Check[自检]
    Check --> Submit[提交]
```</code></pre>
                        <p>优先用“流程图工作台”生成和维护 Mermaid，减少手写错误。</p>
                    </section>

                    <section class="studio-guide-section">
                        <h4>7. Quiz 题目语法（完整）</h4>
                        <pre><code>```quiz
type: tf
id: quiz-tf-demo
question: |
  Item.damage 可以设置武器伤害。
answer: true
explain: |
  在 SetDefaults 中设置 Item.damage。
```

```quiz
type: choice
id: quiz-choice-demo
question: |
  2 + 2 等于几？
options:
  - id: A
    text: 3
  - id: B
    text: 4
answer: B
```</code></pre>
                        <p>支持 <code>tf</code> / <code>single</code> / <code>multiple</code> / <code>choice</code>；判断题 <code>answer</code> 必须是布尔值。</p>
                    </section>

                    <section class="studio-guide-section">
                        <h4>8. 颜色语法（单色 + 动画）</h4>
                        <pre><code>{color:Mad}{单色强调文本}
{colorChange:rainbow}{颜色动画文本}

{color:primary}{可直接使用内置主题色}
{color:warning}{可直接使用内置警告色}</code></pre>
                        <p>内置颜色可直接用；自定义颜色和动画请在 front matter 里声明。</p>
                    </section>

                    <section class="studio-guide-section">
                        <h4>9. 提交前流程</h4>
                        <ol>
                            <li>点“发布前自检”，先看 error / warn。</li>
                            <li>检查预览，必要时用“新标签预览”复核。</li>
                            <li>确认路径、附件、PR 信息后再提交。</li>
                        </ol>
                    </section>

                    <section class="studio-guide-section">
                        <h4>10. 常见错误</h4>
                        <ul>
                            <li>链接失效：目标路径未被索引或相对路径写错。</li>
                            <li>C# 片段不命中：选择器签名与源码不一致。</li>
                            <li>动画不显示：路径不是 <code>anims/*.cs</code> 或未构建。</li>
                            <li>颜色不生效：<code>colors</code>/<code>colorChange</code> 未定义对应键。</li>
                        </ul>
                    </section>
                </div>
            </section>
        </div>
    </aside>

    <aside id="studio-draft-check-modal" class="studio-lazy-column studio-lazy-column--right modal studio-side-panel-modal" aria-label="发布前自检结果" aria-hidden="true">
        <div class="modal-content studio-side-panel-modal-content" role="dialog" aria-modal="true" aria-labelledby="studio-draft-check-title">
            <section class="studio-lazy-panel studio-side-panel-shell">
                <header class="studio-side-panel-header">
                    <h2 id="studio-draft-check-title" class="studio-panel-title">发布前自检结果</h2>
                    <button id="studio-draft-check-close" class="modal-close" type="button" aria-label="关闭">×</button>
                </header>
                <div class="studio-panel-section studio-draft-check-content">
                    <div id="studio-draft-check-summary" class="studio-draft-check-summary">检查尚未开始。</div>
                    <ul id="studio-draft-check-list" class="studio-draft-check-list" aria-live="polite"></ul>
                </div>
            </section>
        </div>
    </aside>

    <div class="workbench-statusbar" role="status" aria-label="页面状态栏"><span class="workbench-statusbar-item">SWISS WORKBENCH</span><span class="workbench-statusbar-sep" aria-hidden="true">|</span><span class="workbench-statusbar-item">LAYOUT: IDE</span><span class="workbench-statusbar-spacer"></span><span class="workbench-statusbar-item">THEME: ACCENT</span></div>


    <script src="/shared/assets/js/site-core.js"></script>
    <script src="/site/assets/js/navigation.js"></script>
    <script src="/site/assets/js/marked.min.js"></script>
    <script src="/site/assets/js/prism.min.js"></script>
    <script>
        if (window.SITE) window.SITE.bootstrapPage('article-studio');
    </script>
    <script src="/site/assets/js/accent-theme.js"></script>
    <script src="/site/assets/js/article-studio.js"></script>
</body>
</html>
