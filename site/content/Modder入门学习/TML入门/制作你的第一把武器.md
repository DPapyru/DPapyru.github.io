---
title: 制作你的第一把武器
author: OpenCode
topic: tml-first-weapon
order: 10
difficulty: beginner
time: 30分钟
description: 从零开始创建你的第一个 tModLoader 武器，学习 Mod 项目结构和基础 API
min_c: 1
min_t: 0
date: 2026-01-31
last_updated: 2026-01-31
tags:
  - 入门
  - 武器
  - 实战
prev_chapter: ./使用tModLoader创建Mod项目.md
---

# 制作你的第一把武器

本章目标：完成你的第一把自定义武器，了解 tModLoader Mod 的基本结构和物品 API。

在掌握 C# 语法基础后，下一步就是将知识应用到实际的 Mod 开发中。本章将带你从零开始创建一把完整的武器，包含所有必要的代码和配置。

## 准备工作

前置条件：
- 已安装 Visual Studio 或 VS Code
- 已安装 tModLoader（Steam 版本）
- 已创建 Mod 项目（或使用本章的模板）
- 掌握 C# 基础语法（类、方法、继承）

## 步骤 1：创建物品类

### 文件位置

在 Mod 项目的 `Items/Weapons/` 目录下创建 `FirstSword.cs`：

```csharp
using Terraria;
using Terraria.ID;
using Terraria.ModLoader;

namespace MyMod.Items.Weapons
{
    public class FirstSword : ModItem
    {
        public override void SetDefaults()
        {
            // 基础属性
            Item.damage = 25;
            Item.width = 40;
            Item.height = 40;
            Item.useTime = 20;
            Item.useAnimation = 20;
            Item.useStyle = ItemUseStyleID.Swing;
            Item.knockBack = 6;
            Item.value = Item.buyPrice(silver: 50);
            Item.rare = ItemRarityID.Green;
            Item.UseSound = SoundID.Item1;
            
            // 武器特有属性
            Item.DamageType = DamageClass.Melee;
            Item.autoReuse = true;
        }
    }
}
```

### 代码说明

| 属性 | 说明 | 常用值 |
|------|------|--------|
| `damage` | 武器伤害 | 根据武器强度设置 |
| `useTime` | 使用间隔（帧）| 60帧=1秒，越小越快 |
| `useStyle` | 使用动画 | `Swing` 挥砍，`Shoot` 射击 |
| `knockBack` | 击退力 | 0-10，越高击退越远 |
| `DamageType` | 伤害类型 | `Melee`, `Ranged`, `Magic`, `Summon` |
| `autoReuse` | 自动连击 | `true` 可长按连击 |

## 步骤 2：添加合成配方

在 `FirstSword.cs` 的类中添加 `AddRecipes` 方法：

```csharp
public override void AddRecipes()
{
    CreateRecipe()
        .AddIngredient(ItemID.Wood, 10)
        .AddIngredient(ItemID.IronBar, 5)
        .AddTile(TileID.WorkBenches)
        .Register();
}
```

### 配方说明

- `AddIngredient`：添加材料（物品ID，数量）
- `AddTile`：需要的制作站（工作台、熔炉等）
- `Register()`：注册配方（必须调用）

## 步骤 3：添加物品贴图

### 贴图要求

- 格式：PNG
- 尺寸：建议 32x32 或 40x40 像素
- 位置：`Items/Weapons/FirstSword.png`（与 .cs 文件同名）

### 贴图规范

- 使用透明背景
- 武器朝向：剑类建议斜向右上方
- 保持泰拉瑞亚原版风格（像素艺术）

## 步骤 4：编译测试

### 编译 Mod

1. 在 Visual Studio 中按 `F6` 或 `Ctrl+Shift+B` 编译
2. 确认无编译错误

### 游戏中测试

1. 启动 tModLoader
2. 进入 Mod 菜单，启用你的 Mod
3. 重载 Mod
4. 创建新世界或进入现有世界
5. 收集材料（10个木头 + 5个铁锭）
6. 在工作台合成 `FirstSword`
7. 测试武器：伤害、攻速、击退效果

## 本章要点（可引用）

- **ModItem 类**：所有自定义物品的基类，必须继承
- **SetDefaults()**：设置物品属性的核心方法
- **AddRecipes()**：定义合成配方的方法
- **物品属性**：`damage`, `useTime`, `knockBack`, `DamageType` 是武器的核心属性
- **配方组成**：材料 + 制作站 + Register()
- **贴图命名**：必须与类名完全一致，放在同一目录

## 常见坑（可引用）

### 坑 1：忘记 Register()

```csharp
// 错误：没有调用 Register()
CreateRecipe()
    .AddIngredient(ItemID.Wood, 10)
    .AddTile(TileID.WorkBenches);
// 配方不会显示！

// 正确
CreateRecipe()
    .AddIngredient(ItemID.Wood, 10)
    .AddTile(TileID.WorkBenches)
    .Register();  // 必须调用！
```

### 坑 2：贴图文件名不匹配

```
Items/Weapons/
  FirstSword.cs      // 类名
  FirstSword.png     // 贴图名必须完全一致
  Firstsword.png     // 错误：大小写不匹配
  First_Sword.png    // 错误：多了下划线
```

### 坑 3：namespace 不匹配文件夹结构

```csharp
// 错误：namespace 与实际路径不匹配
namespace MyMod.Weapons  // 实际文件在 Items/Weapons/

// 正确：namespace 对应文件夹结构
namespace MyMod.Items.Weapons
```

### 坑 4：伤害类型未设置

```csharp
// 错误：未设置 DamageType
public override void SetDefaults()
{
    Item.damage = 25;
    // 其他属性...
}
// 游戏无法正确计算伤害加成！

// 正确
public override void SetDefaults()
{
    Item.damage = 25;
    Item.DamageType = DamageClass.Melee;  // 必须设置！
    // 其他属性...
}
```

## 下一步（可引用）

继续学习：

1. **添加武器特效** - 让武器击中敌人时附加火焰、冰冻等效果
2. **射弹武器** - 制作弓箭、法杖等远程武器
3. **武器升级系统** - 实现武器强化、附魔功能

实践建议：
- 修改伤害数值，观察游戏内变化
- 尝试更换材料，制作不同等级的武器
- 尝试修改 `useTime` 和 `knockBack`，感受手感差异

## 完整代码参考

```csharp
using Terraria;
using Terraria.ID;
using Terraria.ModLoader;

namespace MyMod.Items.Weapons
{
    public class FirstSword : ModItem
    {
        public override void SetDefaults()
        {
            Item.damage = 25;
            Item.width = 40;
            Item.height = 40;
            Item.useTime = 20;
            Item.useAnimation = 20;
            Item.useStyle = ItemUseStyleID.Swing;
            Item.knockBack = 6;
            Item.value = Item.buyPrice(silver: 50);
            Item.rare = ItemRarityID.Green;
            Item.UseSound = SoundID.Item1;
            Item.DamageType = DamageClass.Melee;
            Item.autoReuse = true;
        }

        public override void AddRecipes()
        {
            CreateRecipe()
                .AddIngredient(ItemID.Wood, 10)
                .AddIngredient(ItemID.IronBar, 5)
                .AddTile(TileID.WorkBenches)
                .Register();
        }
    }
}
```

---

**提示**：遇到问题先在游戏中测试，确认代码能编译通过后再进行复杂修改。
