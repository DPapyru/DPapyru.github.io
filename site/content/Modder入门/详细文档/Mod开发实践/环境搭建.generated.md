---
title: 环境搭建 - 开发环境准备
description: 把能写代码 + 能补全 + 能编译这三件事一次配好
author: Papyru
category: Modder入门
topic: mod-dev
last_updated: 2026-01-30
prev_chapter: CSharp高级特性
next_chapter: 第一个模组
---

## 版本说明

> WARNING: 版本说明：本教程适用于 **tModLoader 1.4.4+**（对应 Terraria 1.4.4+）
>
> 如果你使用的是旧版本（1.3 或更早），某些 API 可能不存在。

兼容性说明：
- 1.4.4：本教程基于此版本编写，API 完全兼容
- 1.4.3 及更早：`AddRecipes` 写法略有差异，建议更新 tModLoader

## 目标

本章目标只有一个：让你在 IDE 里写 tModLoader 代码时 **有自动补全**，并且 **能编译通过**。

你可以选择的 IDE：
- Visual Studio（Windows，官方支持，补全最好）
- Rider（Windows / macOS / Linux，跨平台，性能好）
- VS Code（轻量，需要额外配置，体验因人而异）

预计用时：20-30 分钟（根据你的系统）。

## 必备组件清单

建议按顺序准备：

### 步骤1：安装 Terraria
1. 打开 Steam
2. 搜索 "Terraria"
3. 安装游戏（约 300MB）

### 步骤2：安装 tModLoader
1. 在 Steam 搜索 "tModLoader"
2. 安装（与 Terraria 自动关联）
3. 启动 tModLoader，验证能正常进入主菜单

> NOTE: tModLoader 会自动与 Terraria 安装在同一目录。

### 步骤3：选择并安装 IDE

[这里应该有截图：Steam 库界面、tModLoader 安装界面]

| IDE | 优点 | 缺点 | 推荐人群 |
|-----|------|------|---------|
| Visual Studio | 官方支持，补全最好 | 安装包大（5GB+） | Windows 用户，初学者 |
| Rider | 跨平台，性能好 | 付费（有免费试用） | macOS/Linux 用户 |
| VS Code | 轻量，插件丰富 | 需要额外配置 | 有一定基础的开发者 |

**Visual Studio 安装**：
1. 下载 Visual Studio 2022 Community（免费）
2. 安装时勾选 ".NET 桌面开发"
3. 安装 C# 组件

**Rider 安装**：
1. 下载 JetBrains Rider
2. 免费试用 30 天
3. 激活后可使用

### 步骤4：确认 ModSources 目录

ModSources 目录是 tModLoader 读取你的 Mod 的位置。

**不同操作系统下的常见路径**：

#### Windows
```
C:\\Users\\[你的用户名]\\Documents\\My Games\\Terraria\\tModLoader\\ModSources
```

#### macOS
```
~/Library/Application Support/Terraria/ModSources
```

#### Linux
```
~/.local/share/Terraria/ModSources
```

如果找不到目录：
1. 启动 tModLoader
2. 点击主菜单的 "Mod Sources"（或相关入口）
3. 系统会自动打开 ModSources 目录

只要后面"编译验证"通过，你就可以进入下一章创建空模组。

## 传统 .csproj（tMLMod.targets）与补全

你现在用的是基于 `tMLMod.targets` 的传统 `.csproj` 方式。

关键点：
- `.csproj` 里 `Import` 指向本机的 tModLoader 安装路径（例如 `F:\\steam\\steamapps\\common\\tModLoader\\tMLMod.targets`）
- IDE 会通过这个 targets 引入引用与任务，从而拿到 tModLoader 的 API，提供补全与编译

缺点：路径是"机器相关"的；换电脑/换盘符需要调整。

[这里应该有截图：.csproj 文件内容示例，高亮显示 Import 路径]

下面有一段"最小 ModSystem"的示例代码，用来验证引用与补全是否正常。

### 示例代码：最小 ModSystem（确认引用正常）

```csharp
public class MinimalSystem : ModSystem {
    public override void Load() {
        // 只要这里能正常补全并编译，说明 tModLoader 引用链基本通了。
    }
}
```

## 编译验证（最重要）

先别急着写业务逻辑，先做一次"编译验证"：

### 步骤1：打开解决方案

1. 找到项目根目录（有 `site/ContentProjects.sln` 的地方）
2. 双击打开 `ContentProjects.sln`
3. Visual Studio 会加载项目

[这里应该有截图：Visual Studio 解决方案资源管理器界面]

### 步骤2：构建项目

1. 在 Visual Studio 顶部菜单选择 "生成" -> "生成解决方案"
2. 或按 `Ctrl+Shift+B`
3. 观察输出窗口

[这里应该有截图：Visual Studio 生成成功界面，显示"生成成功"]

### 步骤3：验证补全

1. 打开任意 `.cs` 文件
2. 输入 `public override void`，观察是否有 `Load` 的提示
3. 输入 `ModS`，观察是否能补全为 `ModSystem`

[这里应该有截图：Visual Studio 代码补全界面]

### 验证要点

- Visual Studio 能正常打开 `ContentProjects.sln`
- 构建成功（输出窗口显示"生成成功"，没有错误）
- 输入 `ModSystem` 时能看到自动补全
- 输入 `Load` 时能看到方法提示

如果以上全部通过，环境就算搭好了。

WARNING: 如果遇到问题：
- 报错 "找不到 tMLMod.targets"：检查路径是否正确
- 无法打开解决方案：检查 Visual Studio 版本是否支持
- 无自动补全：检查 `.csproj` 是否正确引用了 targets

<!-- generated from: Modder入门/详细文档/Mod开发实践/环境搭建.cs -->
