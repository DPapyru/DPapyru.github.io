---
title: 配置：给你的 Mod 加一个可调开关
author: loguhan
topic: article-contribution
description: 用当前版本 tModLoader 写出第一个可用 ModConfig
order: 100
difficulty: beginner
time: 5分钟
---
# 配置

## 1. 配置作用域

- `ConfigScope.ClientSide`：本地生效（显示、UI、个人偏好）
- `ConfigScope.ServerSide`：服务器统一生效（伤害、掉率、Boss 数值）

本教程改伤害/暴击，使用 `ServerSide`。

## 2. 配置类代码

文件：`Common/Configs/FirstConfig.cs`

```csharp
public class FirstConfig : ModConfig
{
    public override ConfigScope Mode => ConfigScope.ServerSide; // 联机统一规则

    [Header("DamageDemo")] // 配置页分组标题
    [DefaultValue("这是我的第一把配置武器")] // 默认文本
    public string DamageNote = "这是我的第一把配置武器"; // string 输入框

    [DefaultValue(true)] // 默认开启
    public bool EnableDamageBoost; // bool 开关

    [DefaultValue(20)] // 默认 20%
    [Range(0, 300)] // 最小 0，最大 300
    [Increment(5)] // 每次调节 +5 / -5
    public int DamageBoostPercent; // int 滑条（百分比）

    public Vector2 DamageCritVector = new(10f, 5f); // Vector2：X=伤害%，Y=暴击
}
```

如果你想填 `1.2` 这种倍率值，用 `float` 版本：

```csharp
[DefaultValue(1.2f)]
[Range(0.1f, 10f)]
[Increment(0.1f)]
public float DamageMultiplier = 1.2f;
```

## 3. 在武器里读取一个配置值

文件：`Content/Items/ExampleSword.cs`

```csharp
public override void ModifyWeaponDamage(Player player, ref StatModifier damage)
{
    FirstConfig cfg = ModContent.GetInstance<FirstConfig>(); // 1) 拿配置实例
    int percent = cfg.DamageBoostPercent;                    // 2) 读取字段
    damage *= 1f + percent / 100f;                           // 3) 百分比 -> 倍率
}
```

临时自查读取是否成功：

```csharp
Main.NewText($"DamageBoostPercent = {percent}");//在游戏聊天栏打印
```

## 4. 速查

- `DamageNote`：`string`，输入文本
- `EnableDamageBoost`：`bool`，开关
- `DamageBoostPercent`：`int` 或 `float`，滑条数值
- `DamageCritVector`：`Vector2`，`X/Y` 两路参数

## 5. 常见问题

**Q: 联机效果不一致？**
A: 检查 `Mode` 是否是 `ConfigScope.ServerSide`。

**Q: 20 为什么要 `/ 100f`？**
A: `20` 表示 `20%`，要转成倍率 `1 + 20/100 = 1.2`。
