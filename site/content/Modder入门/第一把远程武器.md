---
title: 制作第一把远程武器
author: 小天使
topic: modder-basic
description: 开始学习如何使用Shoot函数，同时教学数学基础
order: 1
difficulty: beginner
time: 15分钟
prev_chapter: Modder入门/制作第一把武器.md
---

# 前言

> 其实我对tModLoader学习有一句话：***阿鼻地狱***。
> 因为确确实实很经常出现学不懂的问题，和很多东西不一样，不会就是不会。

这篇文章会学习如何制作一个发射原版弹幕的武器

# API介绍

## 物品设置

> 下文的内容是 **MyMod** (绿群前类ExampleMod的Mod) 的内容

{{cs:./code/firstgun.cs#cs:m:MyMod.Content.Items.Weapons.FirstGun.SetDefaults()}}

我们这边来看一些关键的内容

### `Item.shoot`

- 作用：
    - 设置此属性可以使用重写方法 `Shoot()`
    - 默认不使用重写方法则为直接发射。
- 默认值：*-1*

### `Item.shootSpeed`

- 作用：
    - 设置此属性可以修改默认发射速度
    - 如果保持默认值弹幕就会以 ***0*** 的速度发射，然后它就卡在原地了
- 默认值：*0*

### `Item.noMelee`

- 作用：设置true，则取消物品的碰撞伤害
- 为什么会有这个属性？因为你不可能直接用枪械通过枪身（特殊情况例外）直接造成伤害

> PS：下面是超级笑话
> ![史上最大笑话：散弹枪-星辰击碎者](/site/content/Modder%E5%85%A5%E9%97%A8/imgs/image-31tpt.png)

## Shoot() 重写方法

{{cs:./code/firstgun.cs#cs:m:MyMod.Content.Items.Weapons.FirstGun.Shoot(Player player, EntitySource_ItemUse_WithAmmo source, Vector2 position, Vector2 velocity, int type, int damage, float knockback)}}

### 方法的参数：

- `player` -> 使用此物品的玩家
- `source` -> 生成源，具体说明属于**中级内容**，此处你只需要知道生成一些内容需要提供生成源
- `position` -> 发射位置，在调用前可以修改，默认为玩家中心
- `velocity` -> 速度，默认情况和 `Item.shootSpeed` 挂钩，和发射位置一样可以被提前修改
- `type` -> 发射的弹幕type，默认值为 `Item.shoot` ，同样可以被提前修改
- `damage` -> 默认是物品全部加成后的伤害，同样可以被提前修改
> **温馨提示**： `Item.damage` 是固定值，设计原则上就不应该变动 `Item.damage` ，**所以 `damage` 是受到所有加成后的伤害**
- `knockback` -> 默认是物品全部加成后的击退力，同样可以被提前修改

### 方法作用

#### `Shoot()` 重写方法
- **返回值**：
  - `true`：执行原版发射逻辑
  - `false`：取消原版发射，需要自己编写发射代码
- **参数修改**：你可以在方法内修改所有参数，这些修改会影响实际发射效果

### `Projectile.NewProjectile()` 方法
- **作用**：生成一个新的弹幕
- **参数说明**：
  - `source`：生成源（保持传入的即可）
  - `position`：发射位置
  - `velocity`：发射速度
  - `type`：弹幕类型
  - `damage`：伤害值
  - `knockback`：击退力
  - `owner`：发射者的玩家索引（`player.whoAmI`）

> 这边我是想不到怎么塞题目了
> 需要题目的请自己解决,我这边就不会再提供题目给你们了
> 这一部分都是手操

## 常见问题

**Q：为什么我的枪不发射子弹？**
A：检查 `Item.shoot` 是否大于0，以及 `Shoot()` 方法是否正确返回

**Q：为什么我的枪子弹不会动？**
A：检查 `Item.shootSpeed` 是否大于0

**Q：如何制作多发射击？**
A：在`Shoot()`方法中使用循环调用多次 `Projectile.NewProjectile()`，每次修改 `velocity` 的角度

**Q：如何让武器消耗特定弹药？**
A：设置 `Item.useAmmo = AmmoID.Arrow;`（或其他弹药类型），并确保玩家背包中有对应弹药