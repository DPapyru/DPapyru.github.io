---
title: 第一个物品 - 创建基础武器
author: Papyru
category: Modder入门
topic: mod-dev
description: 创建基础武器物品并在游戏中验证
last_updated: 2026-01-26
prev_chapter: 第一个模组.md
next_chapter: ../CSharp知识/CSharp高级特性.md
---

模组项目创建成功后，就可以添加第一个物品。创建物品是 Mod 开发中最基础的技能之一。

## 目标与前置条件

**目标**：在模组中创建一个基础武器，并能在游戏中使用。

**前置条件**：
- 已创建MyFirstMod项目
- 熟悉Visual Studio基本操作
- 理解模组项目的基本结构

## 物品创建的基本流程

做Mod时我们需要了解物品创建的流程：

```
1. 创建物品类文件
2. 继承ModItem类
3. 设置物品属性
4. 注册物品
5. 添加贴图
6. 添加语言文件
```

## 第一步：创建物品类文件

在Visual Studio中，右键点击项目 → 添加 → 类文件，命名为`MyFirstItem.cs`。

### 物品类的基本结构

```csharp
using Terraria;
using Terraria.ID;
using Terraria.ModLoader;
using Microsoft.Xna.Framework.Graphics;
using Terraria.GameContent.Creative;

namespace MyFirstMod
{
    public class MyFirstItem : ModItem
    {
        public override void SetStaticDefaults()
        {
            // 静态属性设置
            DisplayName.SetDefault("我的第一个物品"); // 显示名称
            Tooltip.SetDefault("这是一个基础武器示例"); // 提示信息
            
            CreativeItemSacrificesCatalog.Instance.SacrificeTotalTimesByItemId[Type] = 1; // 可合成次数
        }

        public override void SetDefaults()
        {
            // 基础属性设置
            Item.width = 20;              // 物品宽度
            Item.height = 20;             // 物品高度
            Item.maxStack = 1;            // 最大堆叠数量
            Item.value = 100;             // 价值
            Item.rare = ItemRarityID.Blue; // 稀有度（白色=0，蓝色=2，绿色=3，橙色=4，粉色=5，红色=6，紫色=7，深红色=8，浅绿色=9）
            
            // 武器属性
            Item.damage = 10;             // 伤害值
            Item.knockBack = 2;           // 击退力
            Item.useTime = 20;            // 使用时间
            Item.useAnimation = 20;       // 动画时间
            Item.useStyle = ItemUseStyleID.Swing;         // 使用风格
            Item.noMelee = false;         // 是否有近战伤害
            Item.UseSound = SoundID.Item1; // 使用音效
            Item.autoReuse = true;        // 可自动重复使用
        }

        public override void AddRecipes()
        {
            // 添加合成配方
            Recipe recipe = CreateRecipe();
            recipe.AddIngredient(ItemID.DirtBlock, 10);    // 添加10个泥土
            recipe.AddTile(TileID.WorkBenches);           // 在工作台合成
            recipe.Register();                           // 注册配方
        }

        public override void PostUpdate()
        {
            // 物品更新后的逻辑
            base.PostUpdate();
        }
    }
}
```

### 代码解析

这里先提出来，这些属性都是做Mod时常用的：

- **DisplayName** - 物品显示名称
- **Tooltip** - 鼠标悬停提示
- **Item.damage** - 伤害数值
- **Item.useTime** - 攻击速度（数值越小越快）
- **Item.rare** - 稀有度等级
- **Recipe** - 合成配方

这些属性组合起来就形成了一个完整的武器物品。

## 第二步：注册物品

我们需要在Main.cs中注册这个物品，让模组加载器知道它的存在。

### 修改Main.cs

打开Main.cs文件，添加注册代码：

```csharp
using Terraria;
using Terraria.ID;
using Terraria.ModLoader;

namespace MyFirstMod
{
    public class MyFirstMod : Mod
    {
        public static ModItem MyFirstItem { get; private set; }
        
        public override void Load()
        {
            MyFirstItem = new MyFirstItem();
        }

        public override void PostSetupContent()
        {
            // 注册物品
            ModContent.ItemType<MyFirstItem>();
        }

        public override void Unload()
        {
            MyFirstItem = null;
        }
    }
}
```

这样写虽然能工作，但有更好的方法。更推荐的方式是使用AutoLoad特性。

### 改进的注册方法

删除刚才添加的注册代码，改为在物品类上添加AutoLoad特性：

```csharp
using Terraria;
using Terraria.ID;
using Terraria.ModLoader;
using Microsoft.Xna.Framework.Graphics;
using Terraria.GameContent.Creative;

namespace MyFirstMod
{
    public class MyFirstItem : ModItem
    {
        public override string LocalizationCategory => "MyFirstMod"; // 设置语言分类
        // ... 其他代码保持不变
    }
}
```

然后确保Main.cs中有这些内容：

```csharp
using Terraria;
using Terraria.ID;
using Terraria.ModLoader;

namespace MyFirstMod
{
    public class MyFirstMod : Mod
    {
        public MyFirstMod()
        {
            Properties = new ModProperties()
            {
                Autoload = true,
                AutoloadGores = false,
                AutoloadSounds = false
            };
        }
        
        // ... 其他代码保持不变
    }
}
```

## 第三步：添加物品贴图

每个物品都需要一个贴图文件。

### 准备贴图

1. 在项目文件夹中找到`item_0.png`文件
2. 复制并重命名为`MyFirstItem.png`
3. 用任何图片编辑软件打开，修改为你的武器图标

### 贴图要求

做Mod时我们需要了解贴图的要求：

- **尺寸**：16x16、32x32或更大的2的幂次方
- **格式**：PNG格式
- **透明度**：背景需要透明
- **内容**：武器图标设计

**这里先提出来**，初期可以先使用默认的红色方块贴图，等熟悉后再设计自己的图标。

## 第四步：更新语言文件

修改`zh-CN.json`文件，添加物品的语言包：

```json
{
  "$schema": "https://schemas.tmodloader.net/jsonschema/terraria-lang-file.json",
  "mod": "MyFirstMod",
  "displayName": "我的第一个模组",
  "displayUrl": "https://example.com",
  "author": "YourName",
  "description": "这是我的第一个Terraria模组项目，包含基础模组结构和测试代码。",
  "version": "1.0.0.0",
  "versionType": "Release",
  "dependencies": {
    "tML": ">=0.11.8.6"
  },
  "items": {
    "MyFirstMod:MyFirstItem": {
      "displayName": "新手铁剑"
    }
  }
}
```

## 第五步：编译测试

现在我们来测试物品是否能正常工作。

### 编译项目

1. 在Visual Studio中按`Ctrl+Shift+B`编译
2. 确保没有编译错误

### 运行测试

1. 启动tModLoader
2. 进入"Mods"界面
3. 找到"My First Mod"并点击"Refresh Mods"
4. 重新启动tModLoader进入游戏

### 验证物品

进入游戏后：
1. 按`ESC`打开背包
2. 按`Tab`键切换到合成菜单
3. 在合成台中应该能看到"新手铁剑"
4. 合成后可以在背包中使用

## 高级物品属性

在此基础上，还可以为物品添加更多特殊效果。

### 添加自定义效果

修改MyFirstItem.cs，添加自定义效果：

```csharp
public override void OnHitNPC(Player player, NPC target, int damage, float knockBack, bool crit)
{
    // 击中NPC时有概率造成额外伤害
    if (Main.rand.NextFloat() < 0.2f) // 20%概率
    {
        target.SimpleStrikeNPC(damage / 2, 0, false); // 额外造成一半伤害
    }
}

public override void MeleeEffects(Player player, Rectangle hitbox)
{
    // 近战武器特效
    if (Main.rand.NextFloat() < 0.1f) // 10%概率
    {
        int dust = Dust.NewDust(new Vector2(hitbox.X, hitbox.Y), hitbox.Width, hitbox.Height, DustID.Iron);
        Main.dust[dust].velocity *= 2f;
        Main.dust[dust].scale = 1.5f;
    }
}
```

### 使用音效

修改SetDefaults方法，添加特殊音效：

```csharp
public override void SetDefaults()
{
    // ... 其他属性保持不变
    
    // 特殊音效
    Item.UseSound = SoundID.Item71; // 使用特定音效
    Item.shoot = ProjectileID.WoodenArrowFriendly; // 射出物类型
    Item.shootSpeed = 7f; // 射出物速度
}
```

## 物品调试技巧

做Mod时我们需要了解一些调试方法：

### 使用调试模式

1. 在Visual Studio中设置断点（点击行号左侧）
2. 启动tModLoader时按`F5`调试
3. 当物品被触发时，调试器会在断点处暂停

### 输出调试信息

在代码中添加调试输出：

```csharp
public override void OnHitNPC(Player player, NPC target, int damage, float knockBack, bool crit)
{
    Terraria.NewText($"物品击中了NPC！伤害: {damage}", 255, 255, 0);
}
```

## 常见问题

**问题1：物品合成不出来**
```
解决方案：检查配方是否正确，确保所需的材料和工作台都存在
```

**问题2：物品显示名称不正确**
```
解决方案：检查zh-CN.json中的物品ID是否匹配
```

**问题3：物品无法使用**
```
解决方案：检查useTime和useAnimation设置，确保useTime不大于useAnimation
```

## 物品开发流程

到这里我们已经完成了物品开发的基本流程：

1. **创建物品类** → 继承ModItem
2. **设置属性** → SetDefaults中定义基础属性
3. **设置静态属性** → SetStaticDefaults定义显示信息
4. **添加配方** → AddRecipes中定义合成方式
5. **添加贴图** → 准备合适的PNG图片
6. **更新语言** → 在json文件中添加翻译
7. **编译测试** → Ctrl+Shift+B编译并游戏内测试

## 小结与下一步

到这里你已经成功创建了第一个 Terraria 物品。这个物品包含武器的基本功能，并且可以在游戏中正常使用。

**记住几个要点**：
- 物品类必须继承ModItem
- SetDefaults是必填方法，定义物品基础属性
- SetStaticDefaults设置显示名称和提示
- AddRecipes添加合成配方
- 编译后需要在tModLoader中刷新模组

下一步我们将学习更高级的C#特性，为你的模组开发打下更扎实的基础。
