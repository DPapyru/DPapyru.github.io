---
title: 教学文章写作指南
author: 小天使
date: 2026-01-18
last_updated: 2026-01-18
difficulty: beginner
time: 30分钟
description: 写教程文章的统一规范（结构、站点特殊语法、发布流程）
topic: article-contribution
order: 1
---

# 教学文章写作指南

这篇文章是本仓库“唯一入口”的贡献与写作指南：既讲怎么写得好，也讲站点的特殊语法，以及怎么构建/预览/通过 CI。

如果你只想查“站点支持哪些 Markdown 扩展语法”，请看：`docs/怎么贡献/站点Markdown扩展语法说明.md`。

## 你要做的事情（最短路径）

1. 在 `docs/` 下新增或修改 `*.md`（必须带 YAML Front Matter，至少 `title`）
2. 运行构建：`npm run build`（会自动更新 `docs/config.json`、`assets/search-index.json`、`sitemap.xml`）
3. 运行一致性检查：`npm run check-generated`（确保生成文件已提交）
4. 本地预览（任选其一）：
   - `python -m http.server 8000`
   - `npx http-server -p 8080`

注意：`docs/config.json`、`assets/search-index.json`、`sitemap.xml` 是自动生成的，请不要手改它们作为最终结果。

## 仓库结构速览

- `docs/`：教程内容与站内页面（文章在 `docs/**/**/*.md`）
- `assets/`：静态资源（图片建议放 `assets/imgs/`）
- 构建脚本：`generate-index.js`（生成索引/搜索/站点地图）

## 站点会读取哪些“元数据”（YAML Front Matter）

Front Matter 位于 Markdown 文件开头，格式是：

```yaml
---
title: 文章标题
---
```

### 推荐模板（直接复制）

```yaml
---
title: 文章标题（必填）
author: 你的名字
topic: mod-basics
order: 100
difficulty: beginner
time: 10分钟
description: 一句话概括文章内容
date: 2026-01-18
last_updated: 2026-01-18
---
```

### 完整模板（包含可选字段）

```yaml
---
title: 文章标题（必填）
author: 你的名字
topic: mod-basics
order: 100
difficulty: beginner
time: 10分钟
description: 一句话概括文章内容
date: 2026-01-18
last_updated: 2026-01-18

# 章节跳转（填同目录下真实存在的文件名；没有就留空）
prev_chapter:
next_chapter:

# 建议阅读门槛（软建议，不影响阅读；用于列表页/阅读页提示）
min_c: 0
min_t: 0

# 标签（可选）
tags:
  - tag-1
  - tag-2

# 单色高亮（可选）
colors:
  Tip: "#88c0d0"
  Mad: "#f00"

# 颜色动画（可选，不建议滥用）
colorChange:
  Rainbow:
    - "#f00"
    - "#0f0"
    - "#00f"
    - "#f00"
---
```

### 关键规则（结合站点实现）

1. **分类由目录决定**：文章的“分类”来自文件所在目录，例如 `docs/怎么贡献/`、`docs/Modder入门/`，不要在 YAML 里写 `category`。
2. **`topic` 建议写 key**：例如 `article-contribution`、`mod-basics`、`env`。站点支持别名，但 key 最稳定。
3. **`order` 用数字**：数字越小越靠前；没写会被当作很靠后。
4. **章节跳转字段**：`prev_chapter` / `next_chapter` 建议写“同目录下真实存在的 `*.md` 文件名”。如果没有上一章/下一章：
   - 推荐：不写这两个字段
   - 或写空值：`prev_chapter:`（留空），不要写 `prev_chapter: null`（站点会把 `null` 当作字符串，可能生成一个指向 `null` 的按钮）
5. **隐藏文章**：写 `hide: true` 会让文章不进入导航/索引（适合草稿/内部页）。

## 文件位置与命名

推荐：`docs/<分类>/作者-标题.md`

示例：

- `docs/Modder入门/DPapyru-第一个武器.md`
- `docs/怎么贡献/YourName-如何写一篇教程.md`

建议：

- 作者名优先用英文/ASCII（路径兼容更省心）
- 文件名尽量不要有空格/奇怪符号（GitHub Pages + URL 编码容易踩坑）

## 链接与图片（推荐写法）

- 同目录章节互链：直接写文件名，例如 `[下一章](下一章.md)`
- 图片建议放 `assets/imgs/`，在 Markdown 里用相对路径引用：
  - `docs/<分类>/文章.md`：`![说明](../../assets/imgs/xxx.png)`
  - `docs/<分类>/<子目录>/文章.md`：`![说明](../../../assets/imgs/xxx.png)`
- 尽量避免硬编码站点域名链接（方便本地预览与未来迁移）

## 站点特殊语法：颜色标注（单色）

站点固定深色主题，不再区分浅色/深色两套颜色；新文章统一使用 `colors`（单色）。

### 1）在元数据里定义颜色变量

```yaml
colors:
  Mad: "#f00"
  Tip: "#88c0d0"
```

### 2）在正文里使用

```md
{color:Mad}{这句话会变成红色}
{color:Tip}{这是提示色}
```

注意：

- 变量名建议使用英文/ASCII（例如 `Mad`、`Tip`），否则可能无法正常匹配/渲染。

## 站点特殊语法：颜色动画（不建议滥用）

```yaml
colorChange:
  Rainbow:
    - "#f00"
    - "#0f0"
    - "#00f"
    - "#f00"
```

正文：

```md
{colorChange:Rainbow}{彩色闪烁文字}
```

## 站点特殊组件：题目（Quiz）

站点支持把 `quiz` 代码块渲染成可交互题目，渲染逻辑在 `assets/js/site-quiz.js`。

### 支持的题型

- `type: choice`：选择题（单选/多选都用这个）
- `type: tf`：判断题

多选不是靠 `type: multiple`，而是靠 `answer` 写成列表（站点实现会据此渲染成复选框）。

### 选择题示例（单选）

````md
```quiz
type: choice
id: example-choice
question: |
  2 + 2 等于几？
options:
  - id: A
    text: |
      3
  - id: B
    text: |
      4
answer: B
explain: |
  2 + 2 = 4。
```
````

### 选择题示例（多选）

````md
```quiz
type: choice
id: example-multi
question: |
  下面哪些属于 C# 的关键字？
options:
  - id: A
    text: |
      `class`
  - id: B
    text: |
      `namespace`
  - id: C
    text: |
      `banana`
answer:
  - A
  - B
explain: |
  `class` 和 `namespace` 是关键字；`banana` 不是。
```
````

### 判断题示例（tf）

````md
```quiz
type: tf
id: example-tf
question: |
  `Item.damage` 用来设置物品伤害。
answer: true
explain: |
  `SetDefaults()` 里设置的 `Item.damage` 就是这把武器的伤害值。
```
````

### 常见坑（很重要）

1. `type: tf` 的 `answer` 必须写成不带引号的 `true` / `false`。如果写成 `answer: "false"`，站点会把它当作字符串，最终可能被当作 `true` 处理，导致判题结果异常。
2. `choice` 是否多选由 `answer` 决定：`answer` 是单个值 → 单选；`answer` 是列表（多行 `- ...`）→ 多选（复选框）。
3. `id`/选项必须对得上：`answer` 必须与 `options[*].id` 精确一致（大小写也要一致）。

## 写作风格（让读者更容易学会）

### 基本原则

1. **结构统一**：读者能快速找到“目标/步骤/FAQ”
2. **内容准确**：代码示例要能跑（至少自己验证过）
3. **循序渐进**：从小改动到完整功能
4. **实践导向**：建议“先复制运行，再解释原理”
5. **读者友好**：以“说明书式”的清晰表达为主；允许少量类比（但类比必须准确且服务于理解）

### 行文语气（统一风格）

- 以“说明书式”的清晰表达为主：更严肃、少口语化，避免大量感叹/段子化措辞。
- 允许少量幽默的比喻或类比，但必须服务于理解，并保持技术描述准确（不要用梗替代定义）。

### 因材施教：按 C#/tModLoader 层次写（推荐）

站点支持新手测评分流：以 **C# 等级 `C=0/1/2`**、**tModLoader 等级 `T=0/1/2`** 为维度，让不同读者看到不同深度的解释。

你写文章时建议按下面流程组织（重点是：主文保持清爽，分流内容单独维护）：

1. **先确定“核心读者”**：这篇的最低门槛是 `C0` 还是 `C1`？tML 是 `T0` 还是 `T1`？（一句话写在文章开头就行）
2. **保证一条“最小可跑主线”**：不管读者是谁，都先能完成“复制 → 编译 → 进游戏验证”的最小成果。
3. **把分流解释拆到子页**：把“补课/进阶/扩展”写到同目录的 `_分流/` 下，用引用展开插回主文。
4. **只在关键节点分流**：建议每章最多 2–4 个分流块；不要把整篇文章写成满屏 `{if}`。

#### 你应该写什么内容（按层次）

- **C0（从没接触过 C#）**：讲“怎么读懂这份代码”，关键词要解释（`class/namespace/override/=`），多写“常见报错 → 原因 → 怎么改回去”。
- **C1（会基础语法）**：减少语法科普，重点讲“改哪几行能得到什么效果”，把读者带到“会试错调参”。
- **C2（熟练）**：给“更惯用、更好维护”的写法、边界条件与坑（别把主线淹没，放进阶块里就好）。
- **T0（第一次接触 tML）**：讲入口/生命周期（例如 `SetDefaults()`、`AddRecipes()`）、文件放哪里、`Build + Reload` 怎么验证。
- **T1（能写简单 Mod）**：讲 API 的组合用法与常见模式（例如如何组织文件、如何拆模块）。
- **T2（高级）**：讲更复杂主题（网络同步、世界生成、绘制/Shader、性能与兼容性），并给最小可运行例子与注意事项。

#### 推荐写法：条件分流 + 引用展开（让主文不臃肿）

分流指令与引用语法的详细说明见：`docs/怎么贡献/站点Markdown扩展语法说明.md`。

下面是一个“最常用模板”（每条指令独占一行）：

```md
## 第三步：读代码（按你的情况）

{if C == 0}
{[./_分流/xxx-C0.md][C# 补课（C0）]}
{end}

{if T == 0}
{[./_分流/xxx-T0.md][tModLoader 补课（T0）]}
{end}

{if C >= 1 && T >= 1}
{[./_分流/xxx-advanced.md][进阶建议（C≥1 且 T≥1）]}
{end}
```

建议：

- `_分流/` 子页也要写 YAML front matter；如果它只用于被引用，建议加 `hide: true`，避免污染目录/索引。
- 分流块里优先写“可执行的下一步”（例如改哪几行、如何验证），少写“抽象大段总结”。
- GitHub 上直接预览 Markdown 不会应用这些扩展语法，请以本地预览（viewer）效果为准。

### 推荐文章骨架（可直接套用）

````md
# 文章标题

这一章的目标是：[学完你能做什么]

## 你准备好了吗？

你需要完成/了解：[前置条件]

## 第一步：[步骤标题]

[步骤内容]

### 代码示例

```csharp
// 可运行的最小示例
```

### 代码解释

- 这段代码做了什么
- 关键参数/字段是什么意思

## 常见问题

### 1）[问题标题]

**原因**：[问题原因]

**解决**：[解决方法]
````

---

## 参考模板：按“第一个武器”的结构写一章

推荐直接参考：`docs/Modder入门/1-入门/DPapyru-第一个武器.md`。

该模板的核心思想是：

1. **先给验收标准**（读者读完要能做什么，如何验证）
2. **先跑通最小成果**（复制 → 编译 → 进游戏验证）
3. **再引导读者改动关键行**（建立“改动点→结果”的直觉）
4. **把“补课/进阶”拆出去**（主文保持简洁，按需加载）
5. **给可操作的排错清单**（常见报错 → 原因 → 处理步骤）

### 1）Front Matter（像章节一样可跳转）

你可以像 `第一个武器` 那样填写章节跳转，让 `viewer.html` 自动生成页脚导航按钮（无需在正文重复写“章节进度”）：

```yaml
---
title: 你的章节标题
author: 你的名字
date: 2026-01-20
last_updated: 2026-01-20
difficulty: beginner
time: 15分钟
description: 一句话描述本章目标
topic: mod-basics
order: 10
prev_chapter: ../上一个章节.md
next_chapter: ../下一个章节.md
---
```

### 2）正文结构（推荐固定套路）

以“第一个武器”的写法为例，一章建议包含以下块（顺序不建议改动太多）：

硬规范（用于路线页/索引页引用）：

- 必须包含以下 3 个二级标题（`##`）：
  - `## 本章要点（可引用）`
  - `## 常见坑（可引用）`
  - `## 下一步（可引用）`
- 这三个小节会被路线页用 `{[file.md#标题文字][...]}`
  的方式节选引用；请尽量保持标题文字不改名、不“同名重复”。

1. **开头摘要（严肃清晰）**
   - 写清楚适用人群与本章目标（可用 2–4 行 blockquote）
   - 允许少量类比，但必须服务于理解
2. **验收标准**
   - 用列表写“完成本章后应该能做到什么”
   - 每一条最好可验证（例如“改伤害并在游戏中观察到变化”）
3. **阅读前需求**
   - 罗列依赖（环境、上一章成果、需要会的工具操作）
4. **第 1 步：最小可跑主线**
   - 给出“文件放哪里 + 完整可运行代码”
   - 强调：先编译通过，再继续
5. **（可选）概念关联测验**
   - 用 `quiz` 块让读者确认“知道改哪里”
   - 题面要具体，答案要能解释“为什么”
6. **第 2 步：关键行练习**
   - 只选少量关键行（避免把读者拖进抄写地狱）
   - 明确“删掉 → 手动输入还原”的目的：定位改动点
7. **第 3 步：补充阅读（按需）**
   - 主文只给入口，不在这里写长篇补课/进阶
8. **常见问题（排错）**
   - 用“症状 → 原因 → 解决”格式
   - 尽量写确定的检查顺序（读者按步骤走能落地）
9. **下一步**
   - 用 1–3 句说明下一章会引入的新主题（不要写太长）

### 3）如何写“补课/进阶”（保持主文简洁）

以 `第一个武器` 为例，推荐把补充内容放到同目录 `_分流/` 下，再用条件分流 + 引用展开插入：

```md
## 第三步：补充阅读（按需）

{if C == 0}
{[./_分流/xxx-C0.md][C# 补课（C0）]}
{end}

{if T == 0}
{[./_分流/xxx-T0.md][tModLoader 补课（T0）]}
{end}

{if C >= 1 && T >= 1}
{[./_分流/xxx-advanced.md][进阶建议（C≥1 且 T≥1）]}
{end}
```

建议：

- `_分流/` 子页也写 Front Matter；如果它只用于被引用，建议加 `hide: true`。
- 主文中分流块尽量少（建议最多 2–4 处），避免阅读被条件块切碎。

### 4）不要在正文里重复写“章节进度”

`docs/viewer.html` 已统一提供页脚导航按钮，并会移除正文内重复的“章节进度”块。建议：

- 用 `prev_chapter` / `next_chapter` 做章节跳转
- 正文中不要再手写“上一章/下一章/全部章节”导航区

### 5）偏好叠加（P_*）：让文章“写在一起，但只显示必要部分”

站点会根据入站测评与读者手动设置推导 `P_*` 偏好标签（见 `docs/怎么贡献/站点Markdown扩展语法说明.md`）。

写作建议：

- `P_*` 允许同时为真，因此**不要**把它们写进同一个 `if / else if / else` 链条。
- 推荐写成多个独立 `{if}{end}` 叠加块，并把它们放在合适的位置（例如：代码块下方放 `P_code` 的完整片段，排错章节下方放 `P_troubleshoot` 的清单）。

示例：

```md
{if P_code == 1}
这里放更完整的可运行代码（或工程结构）。
{end}

{if P_troubleshoot == 1}
这里放“症状 → 原因 → 解决”的排错清单。
{end}
```

### 6）作者模式：自查分流与引用（贡献者推荐）

你可以在 `docs/viewer.html` 开启作者模式（侧栏按钮或 URL `&author=1`），用来检查：

- 是否缺 `title`、是否缺 `min_c/min_t`
- `{[...#标题]}` 是否找不到目标标题
- 条件分流是否有表达式错误
- 链接/图片是否存在（可手动触发扫描）

## 代码示例规范

- 语法高亮要写语言：例如 `csharp`
- 缩进尽量 4 空格，与项目现有代码风格一致
- 单个代码块别太长：能拆就拆，重点突出关键行

## 发布前检查清单（建议照着勾）

- [ ] YAML Front Matter 至少有 `title`
- [ ] 文章放在 `docs/<分类>/` 下，文件名可读且不易踩坑
- [ ] 链接与图片使用相对路径，本地预览能打开
- [ ] Quiz 能正常显示且能判题（`tf` 的 `answer` 没写成字符串）
- [ ] 运行 `npm run build` 后把生成文件一并提交
- [ ] 运行 `npm run check-generated`，确保不会因“漏提交生成文件”而 CI 失败
